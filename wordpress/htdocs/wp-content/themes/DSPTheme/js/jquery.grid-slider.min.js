(function(B){var S="ontouchstart" in window;var h="kpm_gs_get_post";var x="gridSlider",K=400,i=40,z="Error Loading Content";var d="gsLoadContent",O="gsProcessImg",T="gsChangeSlides",k="gsInitSize",a="gsInitCaption",m="gsShowCaption",R="gsHideCaption";var e="gridSliderInit",L="gridSliderPlay",I="gridSliderPause",Q="gridSliderPrevious",o="gridSliderNext",c="gridSliderBegin",w="gridSliderEnd";var f=r(2.9),u=b(),v=b(7);var j={};l("transition");l("transform");l("boxSizing");l("boxShadow");l("backgroundSize");var H={linear:"linear","":"ease",swing:"ease",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInCubic:"cubic-bezier(.55,.055,.675,.19)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInBack:"cubic-bezier(.60,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175,.885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};var g,N;switch(j.transition){case"WebkitTransition":g="-webkit-transition";N="webkitTransitionEnd";break;case"MozTransition":g="-moz-transition";N="transitionend";break;case"OTransition":g="-o-transition";N="oTransitionEnd";break;default:g="transition";N="transitionend";break}function P(V,U){if(this instanceof P){this._bins=[];this._bins[0]=new t(0,0,V,U)}else{return new P(V,U)}}P.prototype={constructor:P,fitRect:function(X,V){var Y=this.findTopLeftPosition(X,V),U=this._bins.length;for(var W=0;W<U;W++){if(this.splitBin(Y,this._bins[W])){this._bins.splice(W,1);W--;U--}}this.pruneList();return Y},findTopLeftPosition:function(U,ac){var aa=new t(0,0,0,0),W=Number.MAX_VALUE,X=Number.MAX_VALUE,Y=this._bins.length;for(var V=0;V<Y;V++){var ad=this._bins[V];if(ad.fit(U,ac)){var Z=ad.y,ab=ad.x;if(Z<W||(Z===W&&ab<X)){aa.x=ab;aa.y=Z;aa.width=U;aa.height=ac;W=Z;X=ab}}}return aa},splitBin:function(Y,W){if(Y.x>=W.x2()||Y.x2()<=W.x||Y.y>=W.y2()||Y.y2()<=W.y){return false}if(Y.x<W.x2()&&Y.x2()>W.x){if(Y.y>W.y&&Y.y<W.y2()){this._bins.push(new t(W.x,W.y,W.width,Y.y-W.y))}if(Y.y2()<W.y2()){var Z=Y.y2(),V=W.y2()-Z;this._bins.push(new t(W.x,Z,W.width,V))}}if(Y.y<W.y2()&&Y.y2()>W.y){if(Y.x>W.x&&Y.x<W.x2()){this._bins.push(new t(W.x,W.y,Y.x-W.x,W.height))}if(Y.x2()<W.x2()){var U=Y.x2(),X=W.x2()-U;this._bins.push(new t(U,W.y,X,W.height))}}return true},pruneList:function(){for(var X=0;X<this._bins.length;X++){var V=this._bins[X];for(var W=X+1;W<this._bins.length;W++){var U=this._bins[W];if(U.contains(V)){this._bins.splice(X,1);X--;break}if(V.contains(U)){this._bins.splice(W,1);W--}}}},toString:function(){return this._bins.join()}};function t(V,X,W,U){if(this instanceof t){this.x=V;this.y=X;this.width=W;this.height=U}else{return new t(V,X,W,U)}}t.prototype={constructor:t,fit:function(V,U){return(V<=this.width&&U<=this.height)},contains:function(U){return(this.x<=U.x&&U.x2()<=this.x2()&&this.y<=U.y&&U.y2()<=this.y2())},isValid:function(){return(0<this.width&&0<this.height)},x2:function(){return this.x+this.width},y2:function(){return this.y+this.height},toString:function(){return"[x = "+this.x+", y = "+this.y+", width = "+this.width+", height = "+this.height+"]"}};function M(V,U){if(this instanceof M){this._defaultWidth=G(V.width,"auto");this._defaultHeight=G(V.height,"auto");this._effect=E(V.effect,"fade");this._toggle=V.toggle;this._$hoverBox=B('<div class="gs-hover-box">									<div class="gs-hover-content"></div>									<div class="gs-hover-bg"></div>									<div class="gs-left-shadow-arrow"></div>									<div class="gs-right-shadow-arrow"></div>									<div class="gs-hover-close"><div></div></div>								 </div>');this._$contentBox=this._$hoverBox.find(">.gs-hover-content");this._$background=this._$hoverBox.find(">.gs-hover-bg");this._$closeButton=this._$hoverBox.find(">.gs-hover-close");this._$leftArrow=this._$hoverBox.find(">.gs-left-shadow-arrow");this._$rightArrow=this._$hoverBox.find(">.gs-right-shadow-arrow");if(!j.boxShadow){this._$leftArrow.addClass("gs-left-arrow").removeClass("gs-left-shadow-arrow");this._$rightArrow.addClass("gs-right-arrow").removeClass("gs-right-shadow-arrow")}B("body").prepend(this._$hoverBox);this._$hoverBox.one(k,B.proxy(function(){this._padding=this._$contentBox.outerWidth()-this._$contentBox.width();this._margin=this._$hoverBox.outerWidth()-this._$hoverBox.width();this._arrowWidth=this._$leftArrow.width()-1;this._arrowHeight=this._$leftArrow.outerHeight(true);this._minWidth=parseInt(this._$contentBox.css("minWidth"),10)+this._padding+this._margin},this));if(this._toggle){this._delay=0;this._$closeButton.gsAddTransitionClass("gs-all-transition").click({delay:0},B.proxy(this.fadeOut,this)).mousedown(D);this._$hoverBox.click(function(W){W.stopPropagation()});B(document).bind("click"+U,{delay:0},B.proxy(this.fadeOut,this))}else{this._delay=F(V.delay,1000);this._$closeButton.remove();this._$hoverBox.hover(function(){B(this).addClass("gs-hover-on")},B.proxy(function(){this._$hoverBox.removeClass("gs-hover-on");this.fadeOut(100)},this))}}else{return new M(V,U)}}M.prototype={constructor:M,toggle:function(U){if(U.is(this._$slide)){this.fadeOut(0)}else{this._$slide=U;this.fadeIn(U)}},setAlignRight:function(){this._$hoverBox.removeClass("gs-hover-left");this._$currArrow=this._$leftArrow},setAlignLeft:function(){this._$hoverBox.addClass("gs-hover-left");this._$currArrow=this._$rightArrow},getFreeLeft:function(){return Math.max(this._$slide.offset().left-B(window).scrollLeft(),0)},getFreeRight:function(){return B(window).width()-Math.max(this._$slide.offset().left-B(window).scrollLeft()+this._$slide.width(),0)},isLeftAvail:function(){return this.getFreeLeft()>this.getFreeRight()},isRightAvail:function(){return this.getFreeRight()>this.getFreeLeft()},setAutoSize:function(Z){var V=this._$slide.find(".gs-hover"),Y=V.data("content-type"),U=Z-this._padding-this._margin;if("image"===Y){var W=this._$contentBox.children().first(),X=W.width();if(X){this._$contentBox.width(X);if(this._$hoverBox.outerWidth()>Z){this._$contentBox.width(U)}}}else{this._$contentBox.width(U)}},setPosition:function(){var aj=this._$slide.offset().top,ag=this._$slide.offset().left,W=this._$slide.width(),ac=this._$slide.height(),ah=B(window).scrollLeft(),ab=B(window).scrollTop(),X=B(window).width(),Z=B(window).height(),ai,ad,Y,V,af=isNaN(this._width);if(0===this._$slide.position().left){this.setAlignRight();ad=ag+W;if(af){this.setAutoSize(Math.max(ah+X-ad,this._minWidth))}Y=this._$hoverBox.outerWidth();if(!af&&(ad+Y>ah+X)&&this.isLeftAvail()){this.setAlignLeft();ad=ag-Y}}else{this.setAlignLeft();if(af){this.setAutoSize(Math.max(ag-ah,this._minWidth))}Y=this._$hoverBox.outerWidth();ad=ag-Y;if(!af&&ad<ah&&this.isRightAvail()){this.setAlignRight();ad=ag+W}}V=this._$hoverBox.outerHeight();ai=aj-((V-ac)/2);if(ai+V>ab+Z){ai=Math.max(ab+Z-V,aj+this._arrowHeight-V)}if(ai<ab){ai=Math.min(ab,aj+ac-this._arrowHeight)}this._$hoverBox.css({top:ai,left:ad});var ae=Math.max(ai,aj),U=Math.min(ai+V,aj+ac),aa=((U-ae)-this._arrowHeight)/2;aa+=Math.max(aj-ai,0);this._$currArrow.css({top:aa})},showContent:function(){this._$contentBox.removeClass("gs-hidden-el");this._$background.hide();this._$closeButton.show()},expandContent:function(U){U=Math.max(this._$currArrow.position().top-U,0);this._$background.css({top:U}).animate({top:0,width:this._$contentBox.width(),height:this._$contentBox.height()},{duration:K,complete:B.proxy(this.showContent,this),queue:false})},fadeIn:function(U){clearTimeout(this._showId);this._$slide=U;this._showId=setTimeout(B.proxy(function(){clearTimeout(this._hideId);var V=this._$slide.find(".gs-hover");this._width=E(V.data("width"),this._defaultWidth);this._height=E(V.data("height"),this._defaultHeight);this._$hoverBox.addClass("gs-hidden-el").show().trigger(k);this._$closeButton.hide();this._$contentBox.addClass("gs-hidden-el").css({width:this._width,height:this._height});this._$background.stop(true).css({top:0,width:this._width,height:this._height}).show();this.loadContent().done(B.proxy(function(){var W=this._$currArrow.position().top;this.setPosition();this.expandContent(W)},this));this._$hoverBox.removeClass("gs-hidden-el");if("fade"===this._effect){this._$hoverBox.stop(true,true).css({opacity:0}).animate({opacity:1},K)}},this),this._delay)},fadeOut:function(){var V=0;if(arguments.length){var U=arguments[0];if(typeof U==="number"){V=U}else{if(U.data&&typeof U.data.delay==="number"){V=U.data.delay}}}clearTimeout(this._showId);clearTimeout(this._hideId);this._$slide=null;this._hideId=setTimeout(B.proxy(function(){if(this._$hoverBox.hasClass("gs-hover-on")){return}if("fade"===this._effect){this._$hoverBox.stop(true,true).animate({opacity:0},K,function(){B(this).hide()})}else{this._$hoverBox.hide()}},this),V)},hide:function(){clearTimeout(this._showId);clearTimeout(this._hideId);this._$slide=null;this._$hoverBox.hide()},loadContent:function(X){var ac=B.Deferred(),ab=this._$slide.find(".gs-hover"),Z=ab.data("content-type"),V;this._$contentBox.css({overflow:"auto"}).empty();if(typeof Z==="undefined"&&!p(ab.html())){Z="static";ab.data("content-type",Z)}if("static"===Z){this._$contentBox.append(B("<div></div>").html(ab.html()));this.setPosition();this.showContent();ac.reject()}else{var W=ab.data("src");if(typeof Z==="undefined"){Z=J(W);ab.data("content-type",Z)}if("image"===Z){V=B("<img/>").css({maxWidth:"none"});this._$contentBox.append(V);this.setPosition();V.one("load",B.proxy(function(ad){if(B.contains(this._$hoverBox[0],ad.currentTarget)){ac.resolve()}else{ac.reject()}},this)).error(function(){ac.reject()}).attr("src",W);if(V[0].complete||"complete"===V[0].readyState){V.trigger("load")}}else{if("inline"===Z){this._$contentBox.append(B("<div></div>").html(B(W).html()));this.setPosition();this.showContent();ac.reject()}else{if("flash"===Z){this._$contentBox.html(n(W));this.setPosition();this.showContent();ac.reject()}else{if("post"===Z||"ajax"===Z){var U,aa;if("post"===Z){W=ajaxurl;aa=B.param({action:h,post_id:ab.data("post-id")});U="POST"}else{var Y=W.indexOf("?");U=E(ab.data("method"),"GET");if(-1<Y){aa=W.substring(Y+1);W=W.substring(0,Y)}else{aa=""}}V=B("<div></div>");this._$contentBox.append(V);this.setPosition();B.ajax({url:W,type:U,data:aa,success:B.proxy(function(ad){if(B.contains(this._$hoverBox[0],V[0])){V.html(ad);ac.resolve()}else{ac.reject()}},this),error:B.proxy(function(){ac.reject()})})}else{V=B('<iframe frameborder="0" hspace="0" scrolling="auto" width="100%" height="100%"></iframe>').hide();this._$contentBox.css({overflow:"hidden"}).append(V);this.setPosition();V.load(B.proxy(function(ad){if(B.contains(this._$hoverBox[0],ad.currentTarget)){B(ad.currentTarget).show();ac.resolve()}else{ac.reject()}},this)).attr("src",W)}}}}}return ac.promise()}};function s(W,V){if(this instanceof s){this._$slider=B(W);this._options=V;this._responsive=V.responsive;var U=!(!j.boxSizing&&this._responsive);if(S){V.hoverBox.toggle=true;B("body").addClass("gs-touch")}this._numCols=G(V.numCols,4);this._numRows=G(V.numRows,2);this._minSlideWidth=G(V.minSlideWidth,200);this._slideWidth=G(V.slideWidth,300);this._slideHeight=G(V.slideHeight,200);this._slideMargin=(U?F(V.slideMargin,0):0);this._borderWidth=(U?F(V.slideBorder,0):0);this._captionWidth=F(V.captionWidth,"auto");this._captionHeight=F(V.captionHeight,"auto");this._padding=F(this._options.padding,0);this._rotate=V.autoPlay;this._delay=G(V.delay,5000);this._speed=G(V.speed,500);this._tabIndex=F(V.tabIndex,0);this._cssTransition=j.transition&&!f?V.cssTransition:false;this._cssTransform=this._cssTransition&&j.transform;this._namespace="."+((typeof this._$slider.attr("id")!=="undefined")?("grid-slider-"+this._$slider.attr("id")):"grid-slider");this._timerId=null;this._currIndex=0;this._borderSize=(2*this._borderWidth);this.setOptColor(this._$slider,this._options.backgroundColor,"backgroundColor");this.setOptColor(this._$slider,this._options.color,"color");this._bgColor=this._$slider.css("backgroundColor");this._orgCols=this._numCols;this._orgRows=this._numRows;this._dimension=this._numRows*this._numCols;this._outerSize=this._borderSize+this._slideMargin;this._backgroundSize=j.backgroundSize;this._hoverBox=new M(V.hoverBox,this._namespace);this.start=B.noop;this.changeIndexes=B.noop;this.refreshIndexes=B.noop;this.refreshButtons=B.noop;this.updatePageInfo=B.noop;this.resizeMenu=B.noop;this.resizeCPanel=B.noop;this.pauseOnAction=B.noop;this.init()}else{return new s(W,V)}}s.prototype={constructor:s,init:function(){if(!this._cssTransition){B.fn.gsTransition=B.fn.animate;B.fn.gsStopTransition=B.fn.stop}this._$lists=this._$slider.find(">ul").addClass("gs-list").data({index:0,init:false,packed:false});this._$slides=this._$lists.find(">li").addClass("gs-slide");if(f){this._$slides.css("backface-visibility","visible")}this._$lists.wrapAll(B('<div class="gs-container"><div class="gs-main-panel"><div class="gs-slide-panel"></div></div></div>'));this._$container=this._$slider.find(">.gs-container");this._$mainPanel=this._$container.find(">.gs-main-panel");this._$slidePanel=this._$mainPanel.find(">.gs-slide-panel");this._tabIndex=Math.min(this._tabIndex,this._$lists.length-1);this.initLists();this.initControl();this.initMenu();this.initContentPanel();this.initContainer();this.start=this.startTimer;this.selectTab(this._tabIndex);if(this._responsive){this.resize(true);B(window).bind("resize"+this._namespace,B.proxy(function(){this.resize(false)},this))}B(window).bind("resize"+this._namespace,B.proxy(this.hideHoverBox,this));if(!S&&this._options.pauseOnHover){this._$slider.hover(B.proxy(this.pause,this),B.proxy(this.play,this))}if(this._options.pauseOnInteraction){this.pauseOnAction=this.pause}},preloadNext:function(U,V){if(U.length){this.loadImage(B(U.splice(0,1))).always(B.proxy(function(){this.preloadNext(U,V)},this))}else{if(B.isFunction(V)){V.call(this)}}},loadImage:function(V){var U=this.getDeferred(V);if(V.find("img.gs-slide-content").length||"image"===V.data("content-type")){V.trigger(d)}else{U.reject()}return U.promise()},resize:function(af){if(af||B(window).width()!==this._winWidth){this._winWidth=B(window).width();this.pauseTimer();this.start=B.noop;var ah=B.Deferred();ah.promise().always(B.proxy(function(){this.start=this.startTimer;this.start()},this));var ag=this._$currList.children(),U=ag.width(),Y=Math.min(Math.max(Math.round(U/this._minSlideWidth),this._minCols),this._orgCols);while(this._dimension%Y!==0){Y--}if(Y<this._minCols){Y=this._minCols}rows=Math.ceil(this._dimension/Y);if(!af){af=(Y!==this._numCols)}this._numCols=Y;this._numRows=rows;var ab=Math.round(U/this._numCols),X=ab-this._outerSize;if(this._$slider.data("horizontal-captions")){X-=this._captionWidth}var ae=Math.round((X/this._slideWidth)*this._slideHeight),V=ae+this._outerSize;if(this._$slider.data("vertical-captions")){V+=this._captionHeight}var Z=this._numRows*V;this._$slidePanel.height(Z+this._slideMargin);this._$container.height(this._$mainPanel.outerHeight());if(af){var aa=ag.first(),W=new P(this._numCols,this._numRows),ad=this._$currList.data("items");ad.each(B.proxy(function(ak,aj){var ao=B(aj),al=ao.data("colspan"),an=ao.data("rowspan");var aq=W.fitRect(al,an);if(!aq.isValid()){aa=aa.next();if(1>aa.length){aa=this.addBin(this._$currList)}W=new P(this._numCols,this._numRows);aq=W.fitRect(al,an)}if(!B.contains(aa.find(">ul")[0],ao[0])){aa.find(">ul").append(ao)}var ap=((aq.y*V)/Z*100)+"%",am=((aq.x*ab)/U*100)+"%",ai=(al/this._numCols*100)+"%",ar=(an/this._numRows*100)+"%";ao.css({top:ap,left:am});if(j.boxSizing){ao.outerWidth(ai).outerHeight(ar)}else{ao.css({width:ai,height:ar})}},this));this._$currList.children().filter(function(ai){return(0===B(this).find(">ul").children().length)}).remove();var ac=this._$currList.children().length;if(ag.length!==ac){this._$currList.data({numIndex:ac});this._currIndex=Math.min(this._currIndex,ac-1);this.setListInfo(this._$currList);this.setListSize(this._$currList);this.changeControls();this.updateSlideList(false)}}this.resizeMenu();this.resizeCPanel();this.msieResize();ah.resolve()}},initContainer:function(){if(this._slideMargin){var V=["top","bottom","left","right"];for(var W=0;W<V.length;W++){var ab=V[W];var ac=B("<div></div>").addClass("gs-"+ab+"-blinder").css({backgroundColor:this._bgColor});if("top"===ab||"bottom"===ab){ac.css({height:this._slideMargin})}else{ac.css({width:this._slideMargin})}this._$slidePanel.append(ac)}}var X=this._$mainPanel.find(">.gs-prev"),Z=this._$mainPanel.find(">.gs-next"),Y={borderTopWidth:this._padding,borderBottomWidth:this._padding,borderColor:this._bgColor};if(0===X.length){Y.borderLeftWidth=this._padding}if(0===Z.length){Y.borderRightWidth=this._padding}this._$mainPanel.css(Y);if(!this._responsive){this._$slidePanel.width(this._binWidth+this._slideMargin).height(this._binHeight+this._slideMargin);this._$mainPanel.width(this._$slidePanel.width());this._$container.height(this._$mainPanel.outerHeight());this._$slider.width(this._$mainPanel.outerWidth(true))}if(v){var ad=this._$slider.find(".gs-panel"),U=ad.find(">.gs-panel-container"),aa=ad.find(">.gs-panel-bar");s.prototype.msieResize=function(){var ae=this._$mainPanel.height();X.height(ae);Z.height(ae);var af=this._$container.outerHeight();ad.height(af);if(!this._options.panelBarOnHover){af-=aa.height()}U.height(af)};this.msieResize()}},getCaptionWidth:function(){var U=this._$slides.filter(function(){return B(this).data("horizontal-caption")}).find(">.gs-caption");U.outerHeight(this._slideHeight+this._borderSize);var V=Math.min(Math.max.apply(null,U.map(function(){return B(this).outerWidth()}).get()),this._slideWidth);U.outerWidth(V);V=U.outerWidth();U.outerWidth("auto").outerHeight("100%");return V},getCaptionHeight:function(){var V=this._$slides.filter(function(){return B(this).data("vertical-caption")}).find(">.gs-caption");V.outerWidth(this._slideWidth+this._borderSize).outerHeight(Math.max.apply(null,V.map(function(){return B(this).outerHeight()}).get()));var U=V.outerHeight();V.outerWidth("100%").outerHeight("auto");return U},initCaptions:function(){this._$slides.find(">:not(a,img,[class]):first").addClass("gs-caption").toggleClass("gs-no-outer",!j.boxSizing);if("outside"===this._options.captionPosition){var U=false;var V=false;this._$slides.each(B.proxy(function(Z,W){var X=B(W);var Y=E(X.data("caption-align"),this._options.captionAlign);X.data({"caption-align":Y});if("top"===Y||"bottom"===Y){X.data("vertical-caption",true);V=true}else{X.data("vertical-caption",false)}if("left"===Y||"right"===Y){X.data("horizontal-caption",true);U=true}else{X.data("horizontal-caption",false)}},this));if(V){if(isNaN(this._captionHeight)){this._captionHeight=this.getCaptionHeight()}this._rowHeight+=this._captionHeight}if(U){if(isNaN(this._captionWidth)){this._captionWidth=this.getCaptionWidth()}this._colWidth+=this._captionWidth}this._$slider.data({"horizontal-captions":U,"vertical-captions":V});this._$slides.addClass("gs-outside").one(a,B.proxy(this.initExtCaption,this))}else{this._$slides.addClass("gs-inside").one(a,B.proxy(this.initCaption,this)).find(">.gs-caption").gsAddTransitionClass("gs-img-transition");if(f){this._$slides.find(">.gs-caption").css("backface-visibility","visible")}}},initLists:function(){this._colWidth=this._slideWidth+this._outerSize;this._rowHeight=this._slideHeight+this._outerSize;this.initCaptions();this._binWidth=this._numCols*this._colWidth;this._binHeight=this._numRows*this._rowHeight;this._minCols=1;this._$lists.each(B.proxy(function(W,U){var V=B(U).find(">li");B(U).data({items:V,deferred:B.Deferred()});V.each(B.proxy(function(Y,X){var Z=B(X);Z.data({colspan:Math.min(G(Z.data("colspan"),1),this._numCols),rowspan:Math.min(G(Z.data("rowspan"),1),this._numRows)});if(Z.data("colspan")>this._minCols){this._minCols=Z.data("colspan")}},this))},this));if(this._options.initAll){this._$lists.each(B.proxy(function(V,U){this.initList(V)},this))}else{this.initList(this._tabIndex)}},initList:function(V){var X=this._$lists.eq(V),ac=X.data("deferred");if(!X.data("packed")){X.data("packed",true);var Z=E(X.data("shuffle"),this._options.shuffle);if(Z){this.shuffleItems(X)}var aa=X.find(">li");var W=new P(this._orgCols,this._orgRows);var Y=this.addBin(X);aa.css({paddingRight:this._slideMargin,paddingBottom:this._slideMargin}).each(B.proxy(function(ai,ad){var ag=B(ad);this.initSlide(ag);var ah=ag.data("colspan"),af=ag.data("rowspan");var ae=W.fitRect(ah,af);if(!ae.isValid()){Y=this.addBin(X);W=new P(this._orgCols,this._orgRows);ae=W.fitRect(ah,af)}ag.css({top:ae.y*this._rowHeight,left:ae.x*this._colWidth});Y.find(">ul").append(ag);this.setSlideSize(ag);this.processSlide(ag)},this));var U=aa.find(">.gs-wrapper");this.setOptColor(U,this._options.slideBackgroundColor,"backgroundColor");this.setOptColor(U,this._options.slideBorderColor,"borderColor");this.setListInfo(X);X.data({numIndex:X.children().length,numItems:aa.length,effect:E(X.data("effect"),this._options.effect),speed:G(X.data("speed"),this._speed),easing:E(X.data("easing"),this._options.easing),delay:G(X.data("delay"),this._delay)});this.setListSize(X);var ab;switch(X.data("effect")){case"horizontalSlide":ab=this.scrollHorizontal;break;case"verticalSlide":ab=this.scrollVertical;break;case"fade":ab=this.fadeSlides;break;default:ab=this.showSlides;break}X.bind(T,B.proxy(ab,this));ac.resolve()}else{ac.reject()}},setListInfo:function(V){var U=V.children(),W=0;U.each(function(){var X=B(this).find(">ul").children().length;B(this).data({index:W,length:X});W+=X})},setListSize:function(V){var U=V.children(),Y=U.length,X=V.data("effect");if(this._responsive){var W=(Y*100)+"%",Z=(1/Y*100)+"%";if("verticalSlide"===X){V.css({width:"100%",height:W});U.outerHeight(Z)}else{V.css({width:W,height:"100%"});U.outerWidth(Z)}}else{U.width(this._binWidth).height(this._binHeight);if("verticalSlide"===X){V.css({width:U.outerWidth(),height:(Y*U.outerHeight())})}else{V.css({width:(Y*U.outerWidth()),height:U.outerHeight()})}}},initSlide:function(Y){Y.wrapInner(B("<div></div>").addClass("gs-wrapper"));var aa=Y.find(">.gs-wrapper").css({borderWidth:this._borderWidth});Y.data({"image-position":E(Y.data("image-position"),this._options.imagePosition),"hover-effect":E(Y.data("hover-effect"),this._options.hoverEffect),"caption-align":E(Y.data("caption-align"),this._options.captionAlign),"caption-effect":E(Y.data("caption-effect"),this._options.captionEffect),"caption-button":E(Y.data("caption-button"),this._options.captionButton)});var W=aa.find(">.gs-button-tray");if(W.length){if(W.children().length){W.children().gsAddTransitionClass("gs-all-transition");W.show()}}else{W=B("<div></div>").addClass("gs-button-tray");aa.append(W)}W.on("mousedown",".gs-overlay-button",D).on("click",".gs-overlay-button:not(.gs-hoverbox-button)",B.proxy(this.hideHoverBox,this)).gsAddTransitionClass("gs-opacity-transition");var ab=aa.find(">a:first");if(ab.length){ab.data({title:ab.attr("title")}).removeAttr("title");if(ab.hasClass("lb-link")){var U=ab.clone(true).html("<div></div>").addClass("gs-overlay-button gs-zoom-button").gsAddTransitionClass("gs-all-transition");W.append(U).show()}ab.click(B.proxy(this.hideHoverBox,this))}if(this._options.pauseOnInteraction){aa.click(B.proxy(this.pause,this))}Y.trigger(a);if(aa.find(">.gs-hover").length){if(this._options.hoverBox.toggle){var Z=B("<a><div></div></a>").addClass("gs-overlay-button gs-hoverbox-button").gsAddTransitionClass("gs-all-transition").click(B.proxy(function(ad){ad.stopPropagation();this._hoverBox.toggle(Y)},this));W.append(Z).show()}else{aa.hover(B.proxy(function(ad){this._hoverBox.fadeIn(Y)},this),B.proxy(function(ad){this._hoverBox.fadeOut(100)},this))}}var X=aa.find(">.gs-content");if(X.length){var V=B("<a><div></div></a>").addClass("gs-overlay-button gs-panel-button").gsAddTransitionClass("gs-all-transition").click(B.proxy(this.openPanel,this));if(p(X.data("content-type"))){var ac="static";if(!p(X.data("src"))){ac=J(X.data("src"))}else{if(0<X.data("post-id")){ac="post"}}X.data({contentType:ac})}W.append(V).show()}},setSlideSize:function(Z){var X=Z.find(">.gs-wrapper"),V=Z.find(">.gs-caption-wrapper"),ab=Z.data("colspan"),Y=Z.data("rowspan"),aa=(ab*this._colWidth)-this._outerSize,W=(Y*this._rowHeight)-this._outerSize,U=Z.data("horizontal-caption");if(V.length){if(U){aa-=this._captionWidth}else{W-=this._captionHeight}}Z.data({slideWidth:aa,slideHeight:W});if(this._responsive){Z.addClass("gs-border-box").css({top:(parseInt(Z.css("top"),10)/this._binHeight*100)+"%",left:(parseInt(Z.css("left"),10)/this._binWidth*100)+"%"}).outerWidth((ab/this._orgCols*100)+"%").outerHeight((Y/this._orgRows*100)+"%")}else{X.width(aa).height(W);Z.width(X.outerWidth()).height(X.outerHeight())}},processImage:function(W){var V=B(W.currentTarget),U=V.find("img.gs-slide-content");U.one("load",B.proxy(this.processImg,this)).error(B.proxy(function(){var X=this.getDeferred(V);X.reject()},this)).attr("src",U.attr("src"));if(U[0].complete||"complete"===U[0].readyState){U.trigger("load")}},processSlide:function(X){var W=X.find(">.gs-wrapper");if(!p(X.data("src"))||X.data("post-id")){var Y=X.data("content-type");if(p(Y)){X.data("content-type",J(X.data("src")))}X.one(d,B.proxy(this.processContent,this))}else{var U=W.find(">a:first"),V;if(U.length){V=U.find(">:first")}else{V=W.find(">:first")}if(V.length){V.addClass("gs-slide-content");if(V.is("img")){if(this._backgroundSize){V.before(B("<div></div>").addClass("gs-bg-img gs-slide-content").gsAddTransitionClass("gs-opacity-transition"))}X.one(d,B.proxy(this.processImage,this))}V.gsAddTransitionClass("gs-opacity-transition")}}},addLinkButton:function(U){U=U.not("[class]");if(U.length){var V=U.clone(true).html("<div></div>").addClass("gs-overlay-button gs-link-button").gsAddTransitionClass("gs-all-transition");U.closest(".gs-wrapper").find(">.gs-button-tray").prepend(V).show();U.replaceWith(function(){return B(this).children()})}},setHoverEffect:function(W){if(!S&&j.transition&&j.transform&&!f){var V=W.data("hover-effect");var U=W.find(".gs-slide-content");if("zoomIn"===V){U.addClass("gs-zoom-in")}else{if("zoomOut"===V){U.addClass("gs-zoom-out")}else{return}}W.one("mouseenter",function(){U.gsAddTransitionClass("gs-img-transition")})}},addBin:function(U){var V=B('<li><ul class="gs-bin-list"></ul></li>');V.addClass("gs-bin-item").css({borderTopWidth:this._slideMargin,borderLeftWidth:this._slideMargin,borderColor:this._bgColor});U.append(V);return V},initExtCaption:function(X){var W=B(X.currentTarget),V=W.find(">.gs-wrapper"),Y=V.find(">.gs-caption");if(Y.length){var U=B("<div></div>").addClass("gs-caption-wrapper").append(Y);W.append(U);if(W.data("horizontal-caption")){U.css({top:0,width:this._captionWidth,height:"100%",paddingBottom:this._slideMargin})}else{U.css({left:0,width:"100%",height:this._captionHeight,paddingRight:this._slideMargin})}Y.css({width:"100%",height:"100%"});switch(W.data("caption-align")){case"left":W.css({paddingLeft:"+="+this._captionWidth});U.css({left:0});break;case"right":W.css({paddingRight:"+="+this._captionWidth});U.css({right:this._slideMargin});break;case"top":W.css({paddingTop:"+="+this._captionHeight});U.css({top:0});break;default:W.css({paddingBottom:"+="+this._captionHeight});U.css({bottom:this._slideMargin});break}}},initCaption:function(ac){var Y=B(ac.currentTarget),aa=Y.find(">.gs-wrapper"),X=aa.find(">.gs-caption");if(X.length){var ab=Y.data("caption-align"),V=aa.find(">.gs-button-tray");X.data({width:E(X.data("width"),this._captionWidth),height:E(X.data("height"),this._captionHeight)});if("left"===ab||"right"===ab){X.css({top:0}).outerHeight("100%");if("left"===ab){X.css({left:0})}else{X.css({right:0});V.css({left:0,right:"auto"})}var Z=X.data("width");if(!isNaN(Z)){if(this._responsive){X.outerWidth((Z/this._slideWidth*100)+"%")}else{X.outerWidth(Z)}}}else{X.css({left:0}).outerWidth("100%");if("top"===ab){X.css({top:0});V.css({bottom:0,top:"auto"})}else{X.css({bottom:0})}var W=X.data("height");if(!isNaN(W)){if(this._responsive){X.outerHeight((W/this._slideHeight*100)+"%")}else{X.outerHeight(W)}}}if(Y.data("caption-button")){var U=B("<a><div></div></a>").addClass("gs-overlay-button gs-caption-button").gsAddTransitionClass("gs-all-transition").click(B.proxy(this.toggleCaption,this));V.append(U).show();this.bindCaptionEvents(Y,m,R)}else{this.bindCaptionEvents(Y,"mouseenter","mouseleave")}}},bindCaptionEvents:function(Z,U,Y){var X=Z.find(">.gs-wrapper"),ab=X.find(">.gs-caption");switch(Z.data("caption-effect")){case"slide":if(this._cssTransform){var V;switch(Z.data("caption-align")){case"left":V="gs-slide-right";ab.css({left:"auto",right:"100%"});break;case"right":V="gs-slide-left";ab.css({left:"100%",right:"auto"});break;case"top":V="gs-slide-down";ab.css({top:"auto",bottom:"100%"});break;default:V="gs-slide-up";ab.css({top:"100%",bottom:"auto"});break}X.bind(U,function(){ab.addClass(V)}).bind(Y,function(){ab.removeClass(V)})}else{var aa=Z.data("caption-align");ab.css(aa,"-100%");X.bind(U,{position:aa},this.slideInCaption).bind(Y,{position:aa},this.slideOutCaption)}break;case"fade":if(j.transition){ab.addClass("gs-opacity-off");X.bind(U,function(){ab.removeClass("gs-opacity-off")}).bind(Y,function(){ab.addClass("gs-opacity-off")})}else{ab.css({opacity:0});X.bind(U,this.fadeInCaption).bind(Y,this.fadeOutCaption)}break;case"normal":ab.hide();X.bind(U,function(){ab.show()}).bind(Y,function(){ab.hide()});break;default:var W=X.find(".gs-caption-button");if(W.length){W.addClass("gs-caption-off");X.bind(U,function(){ab.show()}).bind(Y,function(){ab.hide()})}break}},initMenu:function(){if(1<this._$lists.length){var U='<div class="gs-menu">								<ul class="gs-menu-list">';this._$lists.each(function(Z,Y){U+='<li class="gs-menu-item">'+E(B(Y).data("title"),Z+1)+"</li>"});U+="</ul>							</div>";this._$mainPanel.prepend(U);this._$menu=this._$mainPanel.find(">.gs-menu");this._$menuList=this._$menu.find(">ul");var X=this._$menuList.children(),V=0;this.setPanelSize(this._$menu);X.gsAddTransitionClass("gs-color-transition").click(B.proxy(function(Z){var Y=B(Z.currentTarget);if(!Y.hasClass("gs-menu-active")){this.selectTab(Y.index())}},this)).each(function(){B(this).css({width:(B(this).width()+2)});V+=B(this).outerWidth()});this._$menuList.width(V);if(S){this._$menu.bind("touchstart",B.proxy(this.menuTouchStart,this))}else{var W=("easeOutCirc" in B.easing)?"easeOutCirc":"linear";this._$menu.mousemove(B.proxy(function(aa){var Y=this._$menu.width()-this._$menuList.width();if(0>Y){var Z=(aa.pageX-this._$menu.offset().left)/this._$menu.width();this._$menuList.animate({left:Math.round(Y*Z)},{duration:K,easing:W,queue:false})}},this))}if(this._responsive){this.resizeMenu=function(){var Y=Math.min(0,this._$menu.width()-this._$menuList.width());this._$menuList.css({left:Math.max(Y,this._$menuList.position().left)})}}}else{this.initHeader()}},initHeader:function(){var V=this._$lists.eq(0).data("title");if(!p(V)){var U=B("<div></div>").addClass("gs-header");this.setPanelSize(U);this._$mainPanel.prepend(U);U.text(V)}},initControl:function(){this._$cpanel=B("<div></div>").addClass("gs-control");this.setPanelSize(this._$cpanel);this._$mainPanel.append(this._$cpanel);var X,Y=(false!==this._options.pageInfo&&"none"!==this._options.pageInfo);if(this._options.playButton||Y||"small"===this._options.navButtons){X=B("<div></div>").addClass("gs-sub-control");this._$cpanel.append(X);if(this._options.playButton){var W=B("<div><div></div></div>").addClass("gs-small-button gs-play-button").toggleClass("gs-pause",!this._rotate).click(B.proxy(this.togglePlay,this)).attr({title:this._rotate?this._options.pause:this._options.play});W.find(">div").gsAddTransitionClass("gs-opacity-transition");X.append(W)}if(Y){var V=B("<div></div>").addClass("gs-page-info");X.append(V);if(true===this._options.pageInfo||"slide"===this._options.pageInfo){this.updatePageInfo=function(){var aa=this._$currList.children().eq(this._currIndex),ab=aa.data("index"),ad=ab+1,Z=ab+aa.data("length");var ac=(ad!=Z?(ad+"-"+Z):ad);V.html(this._options.current.replace("{current}",ac).replace("{total}",this._$currList.data("numItems")))}}else{this.updatePageInfo=function(){V.html(this._options.current.replace("{current}",this._currIndex+1).replace("{total}",this._$currList.data("numIndex")))}}}}this.initNav();this.initNavButtons();this.initTimer();var U=Math.max(this._$cpanel.find(">.gs-sub-control").height(),this._$cpanel.find(">ul").height());if(this._options.timer){U+=this._$cpanel.find(">.gs-timer-box").height()}this._$cpanel.height(U);if(this._responsive&&typeof X!=="undefined"&&typeof this._$navList!=="undefined"){this.resizeCPanel=function(){var ab=this._$navList.width(),aa=X.width(),Z=this._$cpanel.width();if(ab+(2*aa)>Z){this._$navList.css("float","left").show()}else{if(ab+aa>Z){this._$navList.hide()}else{this._$navList.css("float","none").show()}}}}},initNav:function(){if(false!==this._options.control&&"none"!==this._options.control){this._$navList=B("<ul></ul>");if("number"===this._options.control){this._$navList.addClass("gs-nav-number")}else{this._$navList.addClass("gs-nav")}this._$cpanel.append(this._$navList);this._$navList.on((!S&&this._options.selectOnHover?"mouseenter":"click"),">li",B.proxy(this.selectNav,this)).on("mousedown",">li",D);this.changeIndexes=this.initNavItems;this.refreshIndexes=function(){this._$navList.find(">li").removeClass("gs-active").eq(this._currIndex).addClass("gs-active")}}},selectNav:function(V){this.pauseOnAction();var U=B(V.currentTarget);if(!U.hasClass("gs-active")){this._currIndex=B(V.currentTarget).index();this.updateSlideList(true)}},initNavItems:function(){var X=this._$currList.data("numIndex");this._$navList.empty();if(1<X){this._$navList.show();var Y=("number"===this._options.control);for(var W=0;W<X;W++){var V=B("<li></li>");if(Y){V.text(W+1).gsAddTransitionClass("gs-color-transition")}else{V.gsAddTransitionClass("gs-bgcolor-transition")}this._$navList.append(V)}var U=this._$navList.children();this._$navList.css({width:(X*U.outerWidth(true))})}else{this._$navList.hide()}},initTimer:function(){this._$timer=B("<div></div>").addClass("gs-timer").data("pct",1);var U=B("<div></div>").addClass("gs-timer-box").append(this._$timer);this._$cpanel.prepend(U);if(!this._options.timer){U.hide()}},initNavButtons:function(){if(false!==this._options.navButtons&&"none"!==this._options.navButtons){var U=B("<div><div></div></div>");var X=B("<div><div></div></div>");this._$navButtons=X.add(U);this._$navButtons.find(">div").gsAddTransitionClass("gs-opacity-transition");if("hover"===this._options.navButtons||"mouseover"===this._options.navButtons){U.addClass("gs-hover-prev");X.addClass("gs-hover-next");this._$slidePanel.append(this._$navButtons);var W=("+="+(this._slideMargin+this._borderWidth));U.css({marginLeft:W});X.css({marginRight:W});this._$navButtons.gsAddTransitionClass("gs-all-transition")}else{if("small"===this._options.navButtons){var V=this._$cpanel.find(".gs-play-button");this._$navButtons.addClass("gs-small-button");U.addClass("gs-small-prev");X.addClass("gs-small-next");if(V.length){V.before(X).after(U)}else{this._$cpanel.find(">.gs-sub-control").prepend(this._$navButtons)}}else{U.addClass("gs-prev");X.addClass("gs-next");this._$mainPanel.append(this._$navButtons).css({overflow:"visible",borderLeftWidth:U.outerWidth(),borderRightWidth:X.outerWidth()});U.css({left:-U.outerWidth()});X.css({right:-X.outerWidth()})}}U.click(B.proxy(this.prevSlides,this)).mousedown(D).attr({title:this._options.previous});X.click(B.proxy(this.nextSlides,this)).mousedown(D).attr({title:this._options.next});if(!this._options.continuous){this.refreshButtons=function(){U.toggleClass("gs-disabled",0===this._currIndex);X.toggleClass("gs-disabled",(this._$currList.data("numIndex")-1)==this._currIndex)}}}},hideHoverBox:function(){this._hoverBox.hide()},togglePlay:function(){if(this._rotate){this.pause()}else{this.play()}},play:function(){if(!this._rotate){this._$cpanel.find(".gs-play-button").removeClass("gs-pause").attr("title",this._options.pause);this._rotate=true;this.start();this._$slider.trigger(L);this._options.onPlay.call(this)}},pause:function(){if(this._rotate){this._$cpanel.find(".gs-play-button").addClass("gs-pause").attr("title",this._options.play);this._rotate=false;this.pauseTimer();this._$slider.trigger(I);this._options.onPause.call(this)}},changeControls:function(){this._$slidePanel.unbind("touchstart mousewheel DOMMouseScroll");B(document).unbind("keyup"+this._namespace);this.changeIndexes();if(1<this._$currList.data("numIndex")){this._$cpanel.find(".gs-play-button").show();this._$cpanel.find(">.gs-timer-box").css({visibility:"visible"});if(typeof this._$navButtons!=="undefined"){this._$navButtons.show()}if(S&&this._options.swipe){this._$slidePanel.bind("touchstart",B.proxy(this.touchStart,this))}if(this._options.mousewheel){this._$slidePanel.bind("mousewheel DOMMouseScroll",B.proxy(this.mouseScroll,this))}if(this._options.keyboard){B(document).bind("keyup"+this._namespace,B.proxy(this.keyControl,this))}}else{this._$cpanel.find(".gs-play-button").hide();this._$cpanel.find(">.gs-timer-box").css({visibility:"hidden"});if(typeof this._$navButtons!=="undefined"){this._$navButtons.hide()}if(this._options.keyboard){B(document).bind("keyup"+this._namespace,B.proxy(function(U){if(27===U.keyCode){this.hidePanel()}},this))}}},initContentPanel:function(){var Y,W,V;var Z=B('<div class="gs-panel">										<div class="gs-panel-container">											<div class="gs-inner-content"></div>										</div>										<div class="gs-panel-bar">											<div class="gs-panel-title"></div>											<div class="gs-close-button"><div></div></div>										</div>								   </div>');this.setOptColor(Z,this._options.panelBackgroundColor,"backgroundColor");this.setOptColor(Z,this._options.panelColor,"color");var X=this._options.panelEffect;if(!j.boxSizing&&this._responsive){if("slideLeft"===X){X="coverLeft"}else{if("slideRight"===X){X="coverRight"}}}if(A(X,"slide")){this._$mainPanel.wrap('<div class="gs-panel-wrapper"></div>');var U=this._$mainPanel.parent();if(f){U.css("backface-visibility","visible")}switch(X){case"slideRight":U.addClass("gs-horizontal-wrapper").css({left:"-100%"}).prepend(Z);Y="gs-panel-right";W={left:0};V={left:"-100%"};break;case"slideLeft":U.addClass("gs-horizontal-wrapper").append(Z);Y="gs-panel-left";W={left:"-100%"};V={left:0};break;case"slideDown":U.addClass("gs-vertical-wrapper").css({top:"-100%"}).prepend(Z);Y="gs-panel-down";W={top:0};V={top:"-100%"};break;default:U.addClass("gs-vertical-wrapper").append(Z);Y="gs-panel-up";W={top:"-100%"};V={top:0};break}if(this._cssTransform){U.gsAddTransitionClass("gs-transform-transition");this.showPanel=function(){U.addClass(Y)};this.hidePanel=function(){U.removeClass(Y)}}else{this.showPanel=function(){U.animate(W,{duration:K,easing:this._options.easing,queue:false})};this.hidePanel=function(){U.animate(V,{duration:K,easing:this._options.easing,queue:false})}}}else{this._$container.append(Z.addClass("gs-overlay-panel"));if(f){Z.css("backface-visibility","visible")}if(A(X,"cover")){switch(X){case"coverRight":Z.css({left:"-100%"});Y="gs-slide-right";W={left:0};V={left:"-100%"};break;case"coverLeft":Z.css({left:"100%"});Y="gs-slide-left";W={left:0};V={left:"100%"};break;case"coverDown":Z.css({top:"-100%"});Y="gs-slide-down";W={top:0};V={top:"-100%"};break;default:Z.css({top:"100%"});Y="gs-slide-up";W={top:0};V={top:"100%"};break}if(this._cssTransform){Z.gsAddTransitionClass("gs-transform-transition");this.showPanel=function(){Z.addClass(Y)};this.hidePanel=function(){Z.removeClass(Y)}}else{this.showPanel=function(){Z.animate(W,{duration:K,easing:this._options.easing,queue:false})};this.hidePanel=function(){Z.animate(V,{duration:K,easing:this._options.easing,queue:false})}}}else{Z.hide();if("fade"===X){this.showPanel=function(){Z.stop(true,true).fadeIn(K,this._options.easing)};this.hidePanel=function(){Z.stop(true).fadeOut(K,this._options.easing)}}else{this.showPanel=function(){Z.show()};this.hidePanel=function(){Z.hide()}}}}var ab=Z.find(">.gs-panel-bar").dblclick(B.proxy(this.closePanel,this)).mousedown(D),aa=Z.find(">.gs-panel-container");this._$panelTitle=ab.find(">.gs-panel-title");this._$panelContent=aa.find(">.gs-inner-content");ab.find(">.gs-close-button").gsAddTransitionClass("gs-bgcolor-transition").click(B.proxy(this.closePanel,this)).mousedown(D).attr("title",this._options.close);aa.toggleClass("gs-no-outer",!j.boxSizing);if(!S&&this._options.panelBarOnHover){Z.addClass("gs-full-panel").hover(function(){ab.animate({opacity:1},{duration:K,queue:false})},function(){ab.animate({opacity:0},{duration:K,queue:false})})}},openPanel:function(W){W.preventDefault();this.pauseTimer();var U=B(W.currentTarget).closest("li.gs-slide"),V=U.find(">.gs-wrapper>.gs-content"),X=V.data("title");if(!p(X)){this._$panelTitle.text(X).show()}else{this._$panelTitle.hide()}if(V.length){y(V,this._$panelContent)}this.showPanel()},closePanel:function(U){U.preventDefault();this.hidePanel();this.start()},displayPanelError:function(){this._$panelContent.removeClass("gs-loading");var U=B("<div></div>").addClass("gs-panel-error").html("<p>"+z+"</p>");this._$panelContent.empty().append(U)},selectTab:function(U){if(isNaN(U)||0>U||(this._$lists.length-1)<U){return}this.pauseOnAction();this.resetTimer();this._$lists.gsStopTransition(true).eq(this._tabIndex).data({index:this._currIndex}).find("li.gs-slide .gs-slide-content").css({opacity:0});this._tabIndex=U;this._$mainPanel.find(">.gs-menu .gs-menu-item").removeClass("gs-menu-active").eq(this._tabIndex).addClass("gs-menu-active");this._$lists.not(":eq("+this._tabIndex+")").hide();this._$currList=this._$lists.eq(this._tabIndex).show();this._$currList.find("li.gs-slide.gs-loaded .gs-slide-content").gsReflow().css({opacity:1});this._$container.append('<div class="gs-cover"><div></div></div>');var V=this._$currList.data("deferred");V.promise().always(B.proxy(function(){this._$container.find(">.gs-cover").remove()},this));if(!this._$currList.data("packed")){this.initList(this._tabIndex)}var W=this._$currList.find("li.gs-slide");if(!this._$currList.data("init")){this.preloadNext(W.toArray());this._$currList.css({visibility:"visible"}).data({init:true})}this._currIndex=(this._options.resetIndex?0:this._$currList.data("index"));W.each(B.proxy(function(Y,X){B(X).find("img.gs-slide-content").trigger(O)},this));this.changeControls();this.updateSlideList(false);if(this._responsive){this.resize(true)}},prevSlides:function(){this.pauseOnAction();if(this._currIndex>0){this._currIndex--}else{if(this._options.continuous){this._currIndex=this._$currList.data("numIndex")-1}else{return}}this._$slider.trigger(Q);this._options.onPrevious.call(this);this.updateSlideList(true)},nextSlides:function(){this.pauseOnAction();if(this._currIndex<this._$currList.data("numIndex")-1){this._currIndex++}else{if(this._options.continuous){this._currIndex=0}else{return}}this._$slider.trigger(o);this._options.onNext.call(this);this.updateSlideList(true)},rotateSlides:function(){if(this._currIndex<(this._$currList.data("numIndex")-1)){this._currIndex++}else{this._currIndex=0}this.updateSlideList(true)},updateSlideList:function(U){this.resetTimer();this.hideHoverBox();if(U){this._$currList.trigger(T)}else{this.showSlides()}this.updatePageInfo();this.refreshButtons();this.refreshIndexes();if(0===this._currIndex){this._$slider.trigger(c);this._options.onBegin.call(this)}if(this._currIndex==(this._$currList.data("numIndex")-1)){this._$slider.trigger(w);this._options.onEnd.call(this);if(this._options.playOnce){this.pause()}}},loadContents:function(U){U.each(function(W,V){B(V).trigger(d)})},getSlidesAt:function(V,U){return V.children().eq(U).find("li.gs-slide")},getListPosition:function(){var V=("verticalSlide"===this._$currList.data("effect")),W={};if(this._cssTransform){var U=(-this._currIndex*(100/this._$currList.data("numIndex")))+"%";W[j.transform]=(V?"translateY("+U+")":"translateX("+U+")")}else{if(V){W.top=(this._responsive?((-this._currIndex*100)+"%"):(-this._currIndex*(this._binHeight+this._slideMargin)))}else{W.left=(this._responsive?((-this._currIndex*100)+"%"):(-this._currIndex*(this._binWidth+this._slideMargin)))}}return W},showSlides:function(){var U=this.getListPosition();this._$currList.css(U);this.loadContents(this.getSlidesAt(this._$currList,this._currIndex));this.start()},fadeSlides:function(){var U=this._$currList,W=this.getSlidesAt(this._$currList,this._currIndex),V=Math.round(U.data("speed")/2),Y=U.data("easing"),X=this.getListPosition();U.gsStopTransition(true).gsTransition({opacity:0},V,Y,B.proxy(function(){U.css(X).gsTransition({opacity:1},{duration:V,easing:Y,complete:B.proxy(this.start,this),always:B.proxy(function(){this.loadContents(W)},this)})},this))},scrollHorizontal:function(){var U=this.getSlidesAt(this._$currList,this._currIndex);var V=this.getListPosition();this._$currList.gsStopTransition(true).gsTransition(V,{duration:this._$currList.data("speed"),easing:this._$currList.data("easing"),complete:B.proxy(this.start,this),always:B.proxy(function(){this.loadContents(U)},this)})},scrollVertical:function(){var U=this.getSlidesAt(this._$currList,this._currIndex);var V=this.getListPosition();this._$currList.gsStopTransition(true).gsTransition(V,{duration:this._$currList.data("speed"),easing:this._$currList.data("easing"),complete:B.proxy(this.start,this),always:B.proxy(function(){this.loadContents(U)},this)})},processContent:function(ab){var Y=B(ab.currentTarget),aa=Y.find(">.gs-wrapper"),ac=aa.find(">a:first:not([class])"),V=Y.data("src"),af=Y.data("content-type");if(p(af)){af=J(V)}var ah=aa;if("image"===af){if(ac.length){ah=ac}}else{if(ac.length){this.addLinkButton(ac)}}ah.find(">img:first, >.gs-slide-content").remove();if("image"===af){var U=B("<img/>").addClass("gs-slide-content").gsAddTransitionClass("gs-opacity-transition");ah.prepend(U);if(this._backgroundSize){U.before(B("<div></div>").addClass("gs-bg-img gs-slide-content").gsAddTransitionClass("gs-opacity-transition"))}U.one("load",B.proxy(this.processImg,this)).attr("src",V);if(U[0].complete||"complete"===U[0].readyState){U.trigger("load")}return}var ad=B("<div></div>").addClass("gs-slide-content").css({overflow:"auto"}).gsAddTransitionClass("gs-opacity-transition");if("post"===af){var W=Y.data("post-id");if(W){ah.prepend(ad);B.post(ajaxurl,B.param({action:h,post_id:W}),B.proxy(function(aj){ad.html(aj);this.showContent(Y)},this))}}else{if("inline"===af){var ai=B(V);if(ai.length){ah.prepend(ad.html(ai.html()));this.showContent(Y)}}else{if("flash"===af){ah.prepend(ad.html(n(V)));this.showContent(Y)}else{if("ajax"===af){ah.prepend(ad);var Z=V.indexOf("?"),ae="";if(-1<Z){ae=V.substring(Z+1);V=V.substring(0,Z)}var X=Y.data("method");if(p(X)){X="GET"}B.ajax({url:V,type:X,data:ae,success:B.proxy(function(aj){ad.html(aj);this.showContent(Y)},this)})}else{var ag=B('<iframe frameborder="0" hspace="0" scrolling="auto" width="100%" height="100%"></iframe>').addClass("gs-slide-content").gsAddTransitionClass("gs-opacity-transition");ah.prepend(ag);ag.load(B.proxy(function(){this.showContent(Y)},this)).attr("src",V)}}}}},resizeImage:function(Z,V){if(V.length&&(V[0].complete||"complete"===V[0].readyState)){V.css({width:"auto",height:"auto"});var aa=Z.data("slideWidth"),W=Z.data("slideHeight"),U=Z.data("image-position");switch(U){case"fill":case"cover":this.fillContent(V,aa,W);break;case"fit":case"contain":this.fitContent(V,aa,W);break;case"center":this.centerContent(V,aa,W);break;case"stretch":this.stretchContent(V,aa,W);break}if(this._responsive&&"stretch"!==U){var Y=parseInt(V.css("top"),10);Y=isNaN(Y)?0:((Y/W*100)+"%");var X=parseInt(V.css("left"),10);X=isNaN(X)?0:((X/aa*100)+"%");V.css({top:Y,left:X,bottom:"auto",right:"auto",width:(V.width()/aa*100)+"%"});if("fit"===U||"fill"===U||"cover"===U||"contain"===U){V.css("height",(V.height()/W*100)+"%")}else{V.css("height","auto")}}}},processImg:function(Z){var X=B(Z.currentTarget),Y=X.closest(".gs-slide"),W;if(X.width()===0&&X.height()===0){X.one(O,B.proxy(this.processImg,this));return}if(this._backgroundSize){W=Y.find("div.gs-bg-img").css({backgroundImage:"url("+X.attr("src")+")"});switch(Y.data("image-position")){case"fill":case"cover":W.css({backgroundSize:"cover","background-position":"center"});break;case"fit":case"contain":W.css({backgroundSize:"contain","background-position":"center"});break;case"center":W.css({"background-position":"center"});break;case"stretch":W.css({backgroundSize:"100% 100%"});break}X.remove()}else{this.resizeImage(Y,X);W=X}if(B.support.opacity&&!S&&this._options.hoverDim){var U=B("<div></div>").addClass("gs-overlay").gsAddTransitionClass("gs-opacity-transition");W.after(U)}this.setHoverEffect(Y);this.showContent(Y);var V=this.getDeferred(Y);V.resolve()},centerContent:function(U,V,W){U.css({top:(W-U.height())/2,left:(V-U.width())/2})},fillContent:function(V,X,Z){var W=V.width(),U=V.height(),Y=Math.max(Z/U,X/W);V.css({width:(W*Y),height:(U*Y)});this.centerContent(V,X,Z)},fitContent:function(V,Z,aa){var X=V.width(),U=V.height(),Y=Z/aa,W=X/U;if(Y>W){X*=aa/U;U=aa}else{U*=Z/X;X=Z}V.css({width:X,height:U});this.centerContent(V,Z,aa)},stretchContent:function(U,V,W){U.css({top:0,left:0,width:"100%",height:"100%"})},showContent:function(U){U.addClass("gs-loaded").find(".gs-slide-content").css({opacity:1})},setPanelSize:function(U){U.css({borderLeftWidth:this._slideMargin,borderRightWidth:this._slideMargin,borderColor:this._bgColor});if(!j.boxSizing&&!this._responsive){U.width(this._binWidth-this._slideMargin)}},startTimer:function(){if(null===this._timerId&&this._rotate&&1<this._$currList.data("numIndex")){var U=Math.round(this._$timer.data("pct")*this._$currList.data("delay"));this._$timer.animate({width:"0%"},{duration:U,easing:"linear",queue:false});this._timerId=setTimeout(B.proxy(this.rotateSlides,this),U)}},pauseTimer:function(){clearTimeout(this._timerId);this._timerId=null;var U=this._$timer.width()/this._$timer.parent().width();this._$timer.stop(true).data("pct",U)},resetTimer:function(){clearTimeout(this._timerId);this._timerId=null;this._$timer.stop(true).css({width:"100%"}).data("pct",1)},toggleCaption:function(W){var V=B(W.currentTarget),U=V.closest(".gs-wrapper");if(V.hasClass("gs-caption-off")){U.trigger(R);V.removeClass("gs-caption-off")}else{U.trigger(m);V.addClass("gs-caption-off")}},slideInCaption:function(V){var W=B(V.currentTarget).find(">.gs-caption"),U={};U[V.data.position]=0;W.animate(U,{duration:K,queue:false})},slideOutCaption:function(V){var W=B(V.currentTarget).find(">.gs-caption"),U={};U[V.data.position]="-100%";W.animate(U,{duration:K,queue:false})},fadeInCaption:function(U){B(U.currentTarget).find(">.gs-caption").animate({opacity:1},{duration:K,queue:false})},fadeOutCaption:function(U){B(U.currentTarget).find(">.gs-caption").animate({opacity:0},{duration:K,queue:false})},shuffleItems:function(U){var V=U.children().toArray();q(V);U.append(V)},mouseScroll:function(U){U.preventDefault();if(!this._$currList.is(":animated")&&0===parseFloat(this._$currList.css("transition-duration"))){var V=(typeof U.originalEvent.wheelDelta==="undefined")?-U.originalEvent.detail:U.originalEvent.wheelDelta;if(0<V){this.prevSlides()}else{this.nextSlides()}}},keyControl:function(U){switch(U.keyCode){case 37:this.prevSlides();break;case 39:this.nextSlides();break;case 80:this.togglePlay();break;case 27:this.hidePanel();break}},menuTouchStart:function(U){this._menuPosition=this._$menuList.position().left;if(1===U.originalEvent.touches.length){this._menuStartX=U.originalEvent.touches[0].pageX;this._menuStartY=U.originalEvent.touches[0].pageY;this._$menu.bind("touchmove",B.proxy(this.menuTouchMove,this)).one("touchend",B.proxy(function(){this._$menu.unbind("touchmove")},this))}},menuTouchMove:function(X){var U=this._menuStartX-X.originalEvent.touches[0].pageX,V=this._menuStartY-X.originalEvent.touches[0].pageY,W=this._menuPosition-U;if(0>=W&&Math.min(0,this._$menu.width()-this._$menuList.width())<=W){this._$menuList.css({left:W})}if(Math.abs(U)>Math.abs(V)){X.preventDefault()}},touchStart:function(U){this._swipeMove=0;if(1===U.originalEvent.touches.length){this.pauseOnAction();this._swipeStart=new Date();this._startX=U.originalEvent.touches[0].pageX;this._startY=U.originalEvent.touches[0].pageY;if("verticalSlide"===this._$currList.data("effect")){this._$slidePanel.bind("touchmove",B.proxy(this.verticalTouchMove,this))}else{if("horizontalSlide"===this._$currList.data("effect")){this._$slidePanel.bind("touchmove",B.proxy(this.horizontalTouchMove,this))}else{this._$slidePanel.bind("touchmove",B.proxy(this.touchMove,this))}}this._$slidePanel.one("touchend",B.proxy(this.touchEnd,this))}},horizontalTouchMove:function(Y){var U=this._startX-Y.originalEvent.touches[0].pageX;var X=this._startY-Y.originalEvent.touches[0].pageY;var V=this._$slidePanel.width()-this._slideMargin;var W;this._swipeMove=(this._currIndex*V)+U;if(this._cssTransform){W={transform:"translateX("+(-this._swipeMove)+"px)"}}else{W={left:-this._swipeMove}}this._$currList.css(W);if(Math.abs(U)>Math.abs(X)){Y.preventDefault()}},verticalTouchMove:function(Y){var U=this._startX-Y.originalEvent.touches[0].pageX;var X=this._startY-Y.originalEvent.touches[0].pageY;var V=this._$slidePanel.height()-this._slideMargin;var W;this._swipeMove=(this._currIndex*V)+X;if(this._cssTransform){W={transform:"translateY("+(-this._swipeMove)+"px)"}}else{W={top:-this._swipeMove}}this._$currList.css(W);if(Math.abs(X)>Math.abs(U)){Y.preventDefault()}},touchMove:function(X){var U=this._startX-X.originalEvent.touches[0].pageX;var W=this._startY-X.originalEvent.touches[0].pageY;var V=this._$slidePanel.width()-this._slideMargin;this._swipeMove=(this._currIndex*V)+U;if(Math.abs(U)>Math.abs(W)){X.preventDefault()}},touchEnd:function(W){this._$slidePanel.unbind("touchmove");if(Math.abs(this._swipeMove)>i){var U=("verticalSlide"===this._$currList.data("effect")?this._$slidePanel.height():this._$slidePanel.width())-this._slideMargin;var V=(this._currIndex*U);if(this._swipeMove>V){if(this._currIndex<this._$currList.data("numIndex")-1){this._currIndex++;this._$slider.trigger(o);this._options.onNext.call(this)}}else{if(this._swipeMove<V){if(this._currIndex>0){this._currIndex--;this._$slider.trigger(Q);this._options.onPrevious.call(this)}}}}this.updateSlideList(true)},setOptColor:function(V,U,W){if(typeof U!=="undefined"){if("backgroundColor"===W||"background-color"===W){if(""===B.trim(U)){U="transparent"}}V.css(W,U)}},getDeferred:function(V){var U=V.data("deferred");if(typeof U==="undefined"){U=B.Deferred();V.data("deferred",U)}return U},msieResize:B.noop};function A(V,U){return(U===V.substring(0,U.length))}function y(V,ah,ae){var X="gs-loading";var ag;ah.removeClass(X);var ac=V.data("contentType"),W=V.data("src"),Y=V.data("postId");if(!B.isFunction(ae)){ae=B.noop}ah.css({overflow:"auto"}).empty();if("static"===ac||(p(W)&&!Y)){ah.html(V.html());return}if("image"===ac){var U=B("<img/>").gsAddTransitionClass("gs-opacity-transition").css({opacity:0});ah.addClass(X).append(U);U.one("load",function(ai){if(B.contains(ah.get(0),ai.currentTarget)){ah.removeClass(X);B(ai.currentTarget).css({opacity:1});ae()}}).attr("src",W);if(U[0].complete||"complete"===U[0].readyState){U.trigger("load")}}else{if("post"===ac){if(Y){ag=B("<div></div>").gsAddTransitionClass("gs-opacity-transition").css({opacity:0});ah.append(ag);B.post(ajaxurl,B.param({action:h,post_id:Y}),function(ai){if(B.contains(ah.get(0),ag[0])){ah.removeClass(X);ag.html(ai).css({opacity:1});ae()}})}}else{if("inline"===ac){var Z=B(W);if(Z.length){ah.html(Z.html())}}else{if("flash"===ac){ah.html(n(W))}else{if("ajax"===ac){ah.addClass(X);var ab=W.indexOf("?"),ad="",aa=E(V.data("method"),"GET");if(-1<ab){ad=W.substring(ab+1);W=W.substring(0,ab)}ag=B("<div></div>").gsAddTransitionClass("gs-opacity-transition").css({opacity:0});ah.append(ag);B.ajax({url:W,type:aa,data:ad,success:function(ai){if(B.contains(ah.get(0),ag[0])){ah.removeClass(X);ag.html(ai).css({opacity:1});ae()}}})}else{ah.addClass(X);var af=B('<iframe frameborder="0" hspace="0" scrolling="auto" width="100%" height="100%"></iframe>').gsAddTransitionClass("gs-opacity-transition").css({opacity:0});ah.css({overflow:"hidden"}).append(af);af.load(function(ai){if(B.contains(ah.get(0),ai.currentTarget)){ah.removeClass(X);B(ai.currentTarget).css({opacity:1});ae()}}).attr("src",W)}}}}}}function n(V,W,U){W=E(W,"100%");U=E(U,"100%");return'<object type="application/x-shockwave-flash" data="'+V+'" width="'+W+'" height="'+U+'" style="display:block">					<param name="movie" value="'+V+'"/>					<param name="allowFullScreen" value="true"/>					<param name="quality" value="high"/>					<param name="wmode" value="transparent"/>					<a href="http://www.adobe.com/go/getflash"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player"/></a>				</object>'}function q(U){var X=U.length;while(--X>0){var V=Math.floor(Math.random()*(X+1)),W=U[X];U[X]=U[V];U[V]=W}}function D(U){U.preventDefault()}function r(U){var W=navigator.userAgent;var V=W.indexOf("Android");if(V>-1){if(typeof U==="undefined"||parseFloat(W.slice(V+8))<=U){return true}}return false}function b(U){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){if(typeof U==="undefined"){return true}var V=parseFloat(RegExp.$1);if(V<=U){return true}}return false}function p(U){return(typeof U==="undefined"||""===B.trim(U))}function G(U,V){U=parseInt(U,10);return(isNaN(U)||U<=0)?V:U}function F(U,V){U=parseInt(U,10);return(isNaN(U)||U<0)?V:U}function E(U,V){return(typeof U!=="undefined")?U:V}function l(ab){var Y=document.createElement("div"),W=Y.style,V=false;if(ab in W){V=ab}else{var X=ab.charAt(0).toUpperCase()+ab.slice(1),Z=["Moz","Webkit","O","ms"];for(var U=0;U<Z.length;U++){var aa=Z[U]+X;if(aa in W){V=aa;break}}}Y=null;j[ab]=V;return V}function J(U){if(U.match(/[^\s]+\.(jpg|gif|png|bmp)/i)){return"image"}if(U.match(/[^\s]+\.(swf)/i)){return"flash"}if(0===U.indexOf("#")){return"inline"}return"iframe"}B.fn.gsTransition=function(){var W=arguments[0],Y,Z,V,U;if(typeof arguments[1]==="object"){var X=arguments[1];Y=X.duration;Z=X.easing;V=X.complete;U=X.always}else{Y=arguments[1];Z=arguments[2];V=arguments[3]}Y=E(Y,400);Z=E(Z,"swing");return this.each(function(){B(this).queue(function(){if(B.isFunction(V)){B(this).one(N,V);B(this).gsForceTransitionEnd(Y+50)}if(B.isFunction(U)){B(this).one(N+".always",U)}B(this).one(N,function(){B(this).css(g+"-duration","0s").dequeue()});W[g]="all "+Y+"ms "+H[Z];B(this).gsReflow().css(W)})})};B.fn.gsStopTransition=function(U,V){return this.each(function(){if(U){B(this).clearQueue()}clearTimeout(B(this).data("endId"));if(V){B(this).trigger(N)}else{B(this).trigger(N+".always");B(this).unbind(N)}B(this).css(g,"none").css(g+"-duration","0s").dequeue()})};B.fn.gsReflow=function(){return this.each(function(){var U=this.offsetWidth})};B.fn.gsForceTransitionEnd=function(U){return this.each(function(){var V=false;B(this).one(N,function(){V=true});B(this).data("endId",setTimeout(B.proxy(function(){if(!V){B(this).trigger(N)}},this),U))})};B.fn.gsAddTransitionClass=function(U){return this.each(function(W,V){if(j.transition&&!f){B(V).addClass(U)}})};var C={previous:function(){B(this).data(x).prevSlides()},next:function(){B(this).data(x).nextSlides()},play:function(){B(this).data(x).play()},pause:function(){B(this).data(x).pause()},selectTab:function(U){if(typeof U!=="undefined"){B(this).data(x).selectTab(parseInt(U,10))}},destroy:function(){var U=B(this).data(x);U.pause();if(!p(U._namespace)){B(window).add(B(document)).unbind(U._namespace)}U._$slider.add(B("*",U._$slider)).unbind().removeData();B(this).removeData(x)}};B.fn.gridSlider=function(){var U=arguments;var V=U[0];return this.each(function(aa,W){if(C[V]){if(typeof B(W).data(x)!=="undefined"){C[V].apply(W,Array.prototype.slice.call(U,1))}}else{if(typeof V==="object"||!V){var Y=B.extend(true,{},B.fn.gridSlider.defaults,V);var Z=B.metadata?B.extend({},Y,B.metadata.get(this)):Y;var X=new s(W,Z);B(W).data(x,X);X._$slider.trigger(e);X._options.onInit.call(X)}}})};B.fn.gridSlider.defaults={responsive:false,numCols:4,numRows:2,minSlideWidth:200,slideWidth:300,slideHeight:200,slideBorder:0,slideMargin:0,padding:10,effect:"horizontalSlide",speed:500,easing:"",autoPlay:false,delay:5000,playButton:true,timer:true,pauseOnHover:false,pauseOnInteraction:false,control:"index",selectOnHover:false,navButtons:"normal",continuous:true,pageInfo:true,keyboard:false,mousewheel:false,swipe:true,captionAlign:"bottom",captionPosition:"inside",captionEffect:"fade",captionButton:false,tabIndex:0,panelBarOnHover:false,panelEffect:"coverDown",hoverEffect:"none",imagePosition:"fill",shuffle:false,resetIndex:true,hoverDim:true,cssTransition:true,initAll:false,onInit:function(){},onPlay:function(){},onPause:function(){},onPrevious:function(){},onNext:function(){},onBegin:function(){},onEnd:function(){},previous:"previous",next:"next",play:"play",pause:"pause",close:"close",current:"{current} of {total}",hoverBox:{width:250,height:"auto",delay:1000,effect:"fade",toggle:false}}})(jQuery);