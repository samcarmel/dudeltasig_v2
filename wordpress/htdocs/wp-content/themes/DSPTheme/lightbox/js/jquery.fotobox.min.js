(function(w){var K="ontouchstart" in window,I=400,r=800,v=500,O=100,L=250,j=50,e=".lightbox",N="kpm_gs_get_post",t="lbPreloadImages",z="lbInitOuterSize";var M="lightboxOpen",h="lightboxClose",a="lightboxPlay",q="lightboxPause",c="lightboxPrevious",u="lightboxNext",l="lightboxLoad",b="lightboxComplete";var g=p(2.9),s=d(6);var G={linear:"linear","":"ease",swing:"ease",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInCubic:"cubic-bezier(.55,.055,.675,.19)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInBack:"cubic-bezier(.60,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175,.885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"};var k={};m("transition");m("transform");m("boxSizing");m("backgroundSize");var i,J;switch(k.transition){case"WebkitTransition":i="-webkit-transition";J="webkitTransitionEnd";break;case"MozTransition":i="-moz-transition";J="transitionend";break;case"OTransition":i="-o-transition";J="oTransitionEnd";break;default:i="transition";J="transitionend";break}var n={opacity:0,visibility:"hidden",overflow:"auto"};var E="<div class='lb-wrapper'>						<div class='lb-container'>							<div class='lb-outer'>								<div class='lb-preloader'></div>								<div class='lb-inner'></div>								<div class='lb-timer'></div>								<div class='lb-caption'></div>								<div class='lb-prev-half'>									<div class='lb-hover-prev'><div></div></div>								</div>								<div class='lb-next-half'>									<div class='lb-hover-next'><div></div></div>								</div>							</div>							<div class='lb-outer-caption'></div>							<div class='lb-cpanel'>								<div class='lb-prev'><div></div></div>								<div class='lb-play'><div></div></div>								<div class='lb-next'><div></div></div>								<div class='lb-text'><div></div></div>								<div class='lb-info'></div>							</div>							<div class='lb-close'></div>						</div>					</div>";var x={init:function(){var P=new C()},prev:function(){C.getInstance().prev()},next:function(){C.getInstance().next()},close:function(){C.getInstance().close()},destroy:function(){C.getInstance().destroy()}};function C(){if(this instanceof C){if(typeof C.instance==="object"){return C.instance}if(!k.transition){w.fn.lbTransition=w.fn.animate;w.fn.lbStop=w.fn.stop}this._timerId=null;this._$overlay=w("<div></div>").addClass("lb-overlay");this._$wrapper=w(E);this._$thumbPanel=w("<div></div>").addClass("lb-thumbnails");this._$thumbList=w("<ul></ul>").click(B).on("click",">li",w.proxy(this.selectIndex,this));this._$thumbPanel.append(this._$thumbList);this._$overlay.append(this._$wrapper).append(this._$thumbPanel);w("body").append(this._$overlay);this._$container=this._$wrapper.find(">.lb-container").click(B);this._$closeButton=this._$container.find(">.lb-close").lbAddClass("lb-shadow-transition").mousedown(y);this._$outerBox=this._$container.find(">.lb-outer");this._$outerCaption=this._$container.find(">.lb-outer-caption");this._$cpanel=this._$container.find(">.lb-cpanel");this._$preloader=this._$outerBox.find(">.lb-preloader");this._$innerBox=this._$outerBox.find(">.lb-inner");this._$timer=this._$outerBox.find(">.lb-timer").data("pct",1);this._$innerCaption=this._$outerBox.find(">.lb-caption");this._$prevHalf=this._$outerBox.find(">.lb-prev-half");this._$nextHalf=this._$outerBox.find(">.lb-next-half");this._$hoverPrevButton=this._$prevHalf.find(">.lb-hover-prev");this._$hoverNextButton=this._$nextHalf.find(">.lb-hover-next");this._$prevButton=this._$cpanel.find(">.lb-prev");this._$nextButton=this._$cpanel.find(">.lb-next");this._$playButton=this._$cpanel.find(">.lb-play");this._$captionButton=this._$cpanel.find(">.lb-text");this._$infoPanel=this._$cpanel.find(">.lb-info");this._$cpanel.children().not(".lb-info").mousedown(y).lbAddClass("lb-opacity-transition");this._$errorBox=w("<div></div>").addClass("lb-error-box");this._$prevButton.add(this._$hoverPrevButton).click(w.proxy(this.prev,this));this._$nextButton.add(this._$hoverNextButton).click(w.proxy(this.next,this));this._$playButton.click(w.proxy(this.togglePlay,this));this._$captionButton.click(w.proxy(this.toggleCaption,this));this._winWidth=this._winHeight=0;if(K){this._$overlay.addClass("lb-touch")}else{this._$prevHalf.add(this._$nextHalf).hover(function(){w(this).find(">div").animate({opacity:1},{duration:I,queue:false})},function(){w(this).find(">div").animate({opacity:0},{duration:I,queue:false})})}if(!k.boxSizing){this._$innerCaption.css({padding:0})}if(k.transition&&k.transform){this._$innerCaption.css({top:"100%"});C.prototype.showCaption=function(){this._$innerCaption.show().lbStop(true).lbTransition({transform:"translateY(-100%)"},I)};C.prototype.hideCaption=function(){this._$innerCaption.lbStop(true).lbTransition({transform:"translateY(0)"},I)}}else{this._$innerCaption.css({bottom:0});C.prototype.showCaption=function(){this._$innerCaption.show()};C.prototype.hideCaption=function(){this._$innerCaption.hide()}}this._$wrapper.one(z,w.proxy(function(){this._margin=this._$wrapper.outerWidth()-this._$wrapper.width();this._padding=this._$container.outerWidth()-this._$container.width()},this));this.initMisc();if(!f()){this._$overlay.prepend(w("<div></div>").addClass("lb-overlay-bg"))}w(window).bind("resize"+e+"_extra",w.proxy(function(){if(this._displayThumbs){this._$thumbList.lbStop(true).lbTransition({left:this.getThumbOffset()},I)}},this));C.instance=this;C.fnCalled=0}else{return new C()}}C.getInstance=function(){if(typeof C.instance==="undefined"){var P=new C()}return C.instance};C.prototype={constructor:C,open:function(W){W.preventDefault();w("body").addClass("lb-noscroll");var Q=w(W.currentTarget);this._$currGroup=Q.data("group");this._currIndex=Q.data("index");var T=this._$currGroup.data(),V=T.callId;this._numItems=this._$currGroup.length;this._continuous=T.continuous;this._displayCaption=T.caption;this._outsideCaption=("outside"===T.captionPosition);this._displayCaptionButton=this._displayCaption&&!this._outsideCaption&&T.captionButton;var S=T.autoPlay,U=T.playButton,X=T.navButtons,Z=(true===X||"normal"===X);if(S||U){C.prototype.play=this.startTimer}else{C.prototype.play=w.noop}this._$timer.toggleClass("lb-hidden",!T.timer);this._$prevHalf.add(this._$nextHalf).toggle("hover"===X||"mouseover"===X);this._$prevButton.add(this._$nextButton).toggleClass("lb-hide-el",!Z);this._$playButton.toggleClass("lb-pause",S).toggleClass("lb-hide-el",!U);this._$captionButton.toggleClass("lb-hide-el",!this._displayCaptionButton).removeClass("lb-expand").attr("title",this._$currGroup.data("closeCaption"));this._$infoPanel.toggleClass("lb-hide-el",!T.numberInfo);this._$outerCaption.css({maxHeight:"none"}).removeClass("lb-concat");this._displayCPanel=U||Z||T.numberInfo||this._displayCaptionButton;this._$playButton.attr("title",S?T.pause:T.play);this._$closeButton.attr("title",T.close);this._$prevButton.add(this._$hoverPrevButton).attr("title",T.previous);this._$nextButton.add(this._$hoverNextButton).attr("title",T.next);if(this._displayCaption){if(this._outsideCaption){C.prototype.updateCaption=this.updateOuterCaption}else{C.prototype.updateCaption=this.updateInnerCaption}}else{C.prototype.updateCaption=w.noop;this._$innerCaption.add(this._$outerCaption).hide()}if(this._continuous){C.prototype.updateNavs=w.noop;this._$prevButton.add(this._$nextButton).add(this._$hoverPrevButton).add(this._$hoverNextButton).removeClass("lb-disable")}else{C.prototype.updateNavs=function(){this._$prevButton.add(this._$hoverPrevButton).toggleClass("lb-disable",0===this._currIndex);this._$nextButton.add(this._$hoverNextButton).toggleClass("lb-disable",(this._numItems-1)===this._currIndex)}}this._$overlay.add(this._$closeButton).unbind("click").click(w.proxy(this.close,this));var P=Math.max(T.initialWidth,40),Y=Math.max(T.initialHeight,40);this._$overlay.css({visibility:"hidden",opacity:1}).show();this.initThumbnails();this._$container.css({width:P,height:Y});this._$wrapper.trigger(z).css({width:P+this._padding,height:Y+this._padding}).css({marginLeft:-this._$wrapper.outerWidth()/2,marginTop:-this._$wrapper.outerHeight()/2-this._offset});this.showThumbnails();this._$overlay.css({visibility:"visible"});this.loadContent(false);this.ie6_open();w(document).trigger(M);var R=Q.data("lightbox-group");if(typeof R!=="undefined"){this._$wrapper.trigger(t+"."+(V+"_"+R))}},close:function(P){if(typeof P!=="undefined"){P.stopPropagation()}w("body").removeClass("lb-noscroll");this.resetTimer();this._$overlay.add(this._$closeButton).unbind("click");this._$overlay.lbStop(true).lbTransition({opacity:0},I,w.proxy(function(){this._$wrapper.add(this._$container).lbStop(true);this._$innerBox.add(this._$innerCaption).add(this._$outerCaption).empty();this._$innerCaption.add(this._$outerCaption).hide();this.hideThumbnails();this.disableControl();this._$overlay.add(this._$preloader).hide()},this));this.ie6_close();w(document).trigger(h)},initMisc:function(){if(s){this._$overlay.css({position:"absolute"});C.prototype.ie6_open=function(){w("body").find("select").addClass("lb-hide-selects")};C.prototype.ie6_close=function(){w("body").find("select").removeClass("lb-hide-selects")};this.setOverlayToDocSize();w(window).bind("resize"+e+"_extra",w.proxy(this.setOverlayToDocSize,this))}},initThumbnails:function(){var Q=this._$currGroup.data("thumbnails");this._displayThumbs=(1<this._$currGroup.length&&Q.enable);this._$thumbList.empty();if(this._displayThumbs){this._$thumbPanel.show();this._$currGroup.each(w.proxy(function(V,T){var S=w(T),U=w("<li></li>").data("thumbUrl",S.data("lightbox-thumb")||S.attr("href")).css({width:Q.width,height:Q.height}).lbAddClass("lb-border-transition"),R=w("<img/>");if(Q.title){R.attr({title:S.attr("title")||S.data("title")})}U.append(R);this._$thumbList.append(U)},this));this.loadNextThumb(this._$thumbList.children().toArray());this._$thumbList.css({width:this._$currGroup.length*this._$thumbList.children().outerWidth(true)});var P=("top"===Q.position);this._$thumbPanel.toggleClass("lb-top",P);this._offset=this._$thumbPanel.height()/2;if(P){this._offset*=-1}}else{this._offset=0}},fillThumb:function(Q){var T=Q.parent(),R=Q.width(),P=Q.height(),S=T.width(),V=T.height(),U=Math.max(V/P,S/R);Q.css({width:(R*U),height:(P*U)}).css({top:(V-Q.height())/2,left:(S-Q.width())/2})},showThumbnails:function(){if(this._displayThumbs){this._$thumbPanel.lbStop(true,true).css({opacity:0}).lbTransition({opacity:1},I)}},hideThumbnails:function(){this._$thumbPanel.lbStop(true,true).hide();this._$thumbList.empty()},getThumbOffset:function(){var P=this._$thumbList.children().outerWidth(true);return w(window).width()/2-((this._currIndex*P)+(P/2))},loadContent:function(P){this._$item=this._$currGroup.eq(this._currIndex);this.disableControl();this._$outerBox.css({width:"100%",height:"100%"});this._$innerBox.css({width:"auto",height:"auto"});this.updateCaption();this.getContent();if(this._displayThumbs){if(typeof P==="undefined"||true===P){this._$thumbList.lbStop(true).lbTransition({left:this.getThumbOffset()},I)}else{this._$thumbList.lbStop(true).css({left:this.getThumbOffset()})}this._$thumbList.children().removeClass("lb-active-thumb").eq(this._currIndex).addClass("lb-active-thumb")}},getContent:function(){var V=this._$item,W=V.data("contentType"),Q=V.attr("href"),R,X;w(document).trigger(l);this._$innerBox.css(n).css({backgroundColor:this._$container.css("backgroundColor"),color:this._$container.css("color")}).empty();if("image"===W){this._$preloader.show();R=w("<img/>");this._$innerBox.append(R);R.one("load",w.proxy(function(Z){var Y=w(Z.currentTarget);if(w.contains(this._$innerBox.get(0),Y[0])){X=this.getContentSize(V,Y);Y.css({width:"100%",height:"100%"});this.displayContent(X.width,X.height);w(document).trigger(b)}},this)).error(w.proxy(function(Y){if(w.contains(this._$innerBox.get(0),Y.currentTarget)){this.displayError()}},this)).attr("src",Q);if(R[0].complete||"complete"===R[0].readyState){R.trigger("load")}}else{if("inline"===W){R=w(Q);if(R.length){X=this.getContentSize(V,R);this._$innerBox.css({color:this._$currGroup.data("color"),backgroundColor:this._$currGroup.data("backgroundColor")}).html(R.html());this.displayContent(X.width,X.height);w(document).trigger(b)}else{this.displayError()}}else{if("flash"===W){X=this.getContentSize(V);var T="<object type='application/x-shockwave-flash' data='"+Q+"' width='100%' height='100%' style='display:block'>									<param name='movie' value='"+Q+"'/>									<param name='allowFullScreen' value='true'/>									<param name='quality' value='high'/>									<param name='wmode' value='transparent'/>								</object>";this._$innerBox.html(T);this.displayContent(X.width,X.height);w(document).trigger(b)}else{if("ajax"===W||"post"===W){var P,U="";this._$preloader.show();R=w("<div></div>").hide();this._$innerBox.append(R);if("post"===W){Q=ajaxurl;P="POST";U=w.param({action:N,post_id:V.data("post-id")})}else{var S=Q.indexOf("?");P=V.data("lightbox-method");if(o(P)){P="GET";V.data("lightbox-method",P)}if(-1<S){U=Q.substring(S+1);Q=Q.substring(0,S)}}w.ajax({url:Q,type:P,data:U,success:w.proxy(function(Y){if(w.contains(this._$innerBox.get(0),R[0])){this._$innerBox.html(Y);X=this.getContentSize(V);this.displayContent(X.width,X.height);w(document).trigger(b)}},this),error:w.proxy(function(){if(w.contains(this._$innerBox.get(0),R[0])){this.displayError()}},this)})}else{this._$preloader.show();R=w("<iframe frameborder='0' hspace='0' scrolling='auto' width='100%' height='100%'></iframe>");this._$innerBox.css({overflow:"hidden"}).append(R);R.load(w.proxy(function(Y){if(w.contains(this._$innerBox.get(0),Y.currentTarget)){X=this.getContentSize(V);this.displayContent(X.width,X.height);w(document).trigger(b)}},this)).attr("src",Q)}}}}},getContentSize:function(R,T){var U=R.data("orgWidth"),P=R.data("orgHeight");if(typeof U==="undefined"||typeof P==="undefined"){var S,Q;U=R.data("lightboxWidth");P=R.data("lightboxHeight");if(typeof T!=="undefined"&&T.length){S=T.outerWidth();Q=T.outerHeight()}else{S=r;Q=v}U=A(U,S);P=A(P,Q);R.data({orgWidth:U,orgHeight:P})}if(this._$currGroup.data("responsive")){return this.getResponsiveSize(U,P)}return{width:U,height:P}},displayContent:function(Q,U){if(this._$wrapper.is(":visible")){this._$preloader.hide();var S=Q,P=U,V=this._$currGroup.data("speed"),W=this._$currGroup.data("easing"),T=w.Deferred(),R=w.Deferred();if(this._displayCPanel){P+=this._$cpanel.outerHeight()}if(this._displayCaption&&this._outsideCaption&&!o(this._$outerCaption.html())){this._$outerCaption.width(S);P+=this._$outerCaption.outerHeight()}this._$innerBox.lbStop(true).css({opacity:0});if(this._$container.width()===S&&this._$container.height()===P){V=0}w.when(T.promise(),R.promise()).done(w.proxy(function(){this._$outerBox.css({width:Q,height:U});this._$innerBox.css({width:"100%",height:"100%"});this._$infoPanel.html(this._$currGroup.data("current").replace("{current}",(this._currIndex+1)).replace("{total}",this._numItems));if(this._displayCaption){if(this._outsideCaption){if(!o(this._$outerCaption.html())){this._$outerCaption.show()}}else{if(!this._$captionButton.hasClass("lb-expand")&&!o(this._$innerCaption.html())){this.showCaption()}}}this.enableControl();this._$innerBox.css({visibility:"visible"}).lbStop(true).lbTransition({opacity:1},I,w.proxy(function(){this.play()},this))},this));this._$container.lbStop(true).lbTransition({width:S,height:P},V,W,function(){T.resolve()});S+=this._padding;P+=this._padding;this._$wrapper.lbStop(true).lbTransition({marginLeft:-(S+this._margin)/2,marginTop:-(P+this._margin)/2-this._offset,width:S,height:P},V,W,function(){R.resolve()})}},displayError:function(){var Q,P;this._$errorBox.html(this._$currGroup.data("errorMessage"));this._$innerBox.empty().append(this._$errorBox);Q=this._$errorBox.outerWidth();P=this._$errorBox.outerHeight();this._$item.data({orgWidth:Q,orgHeight:P});this.displayContent(Q,P)},updateInnerCaption:function(){this._$innerCaption.empty().hide().lbReflow().css({transform:"translateY(0)"});var P=this._$item.attr("title")||this._$item.data("title");if(!o(P)){this._$innerCaption.html(P);this._$captionButton.toggleClass("lb-hide-el",!this._displayCaptionButton)}else{this._$captionButton.addClass("lb-hide-el")}},updateOuterCaption:function(){var P=this._$item.attr("title")||this._$item.data("title");this._$outerCaption.empty().hide();if(!o(P)){this._$outerCaption.html(P)}},enableControl:function(){this.unbindEvents();var P=this._$currGroup.data();if(P.responsive){w(window).bind("resize"+e,w.proxy(this.resize,this))}if(P.keyboard){w(document).bind("keyup"+e,w.proxy(this.keyControl,this))}if(P.mousewheel){this._$wrapper.bind("mousewheel DOMMouseScroll",w.proxy(this.mousescroll,this))}if(K&&P.swipe){this._$wrapper.bind("touchstart",w.proxy(this.touchStart,this))}this.updateNavs();this._$prevHalf.add(this._$nextHalf).removeClass("lb-hidden");this._$cpanel.toggle(this._displayCPanel)},disableControl:function(){this.unbindEvents();this._$prevHalf.add(this._$nextHalf).addClass("lb-hidden");this._$cpanel.hide()},unbindEvents:function(){w(window).unbind("resize"+e);w(document).unbind("keyup"+e);this._$wrapper.unbind("mousewheel DOMMouseScroll touchstart touchmove touchend")},toggleCaption:function(){var P;this._$captionButton.toggleClass("lb-expand",!this._$captionButton.hasClass("lb-expand"));if(this._$captionButton.hasClass("lb-expand")){this.hideCaption();P=this._$currGroup.data("openCaption")}else{this.showCaption();P=this._$currGroup.data("closeCaption")}this._$captionButton.attr("title",P)},togglePlay:function(){this._$currGroup.data("autoPlay",!this._$currGroup.data("autoPlay"));if(this._$currGroup.data("autoPlay")){this._$playButton.addClass("lb-pause").attr({title:this._$currGroup.data("pause")});this.play();w(document).trigger(a)}else{this._$playButton.removeClass("lb-pause").attr({title:this._$currGroup.data("play")});this.pause();w(document).trigger(q)}},prev:function(){this.resetTimer();if(this._currIndex>0){this._currIndex--}else{if(this._continuous){this._currIndex=this._numItems-1}else{return}}this.loadContent();w(document).trigger(c)},next:function(){this.resetTimer();if(this._currIndex<this._numItems-1){this._currIndex++}else{if(this._continuous){this._currIndex=0}else{return}}this.loadContent();w(document).trigger(u)},selectIndex:function(R){R.preventDefault();var P=w(R.currentTarget),Q=P.index();if(Q!==this._currIndex){this.resetTimer();this._currIndex=Q;this.loadContent()}},rotateNext:function(){this.resetTimer();this._currIndex=(this._currIndex<this._numItems-1)?this._currIndex+1:0;this.loadContent()},getResponsiveSize:function(P,X){var U=X/P,R=this._$item.data("orgWidth"),S=this._$item.data("orgHeight"),Q=this._margin+this._padding,V=w(window).width()-Q,W=w(window).height()-Q,Y=this._displayCaption&&this._outsideCaption&&!o(this._$outerCaption.html()),T;P=Math.max(V,O);if(!isNaN(R)){P=Math.min(P,R)}X=U*P;if(this._displayCPanel){W-=this._$cpanel.outerHeight()}if(this._displayThumbs){W-=this._$thumbPanel.height()}T=W;if(Y){this._$outerCaption.css({maxHeight:"none"}).removeClass("lb-concat").width(P);W-=this._$outerCaption.outerHeight()}if(X>W){X=Math.max(W,O);if(!isNaN(S)){X=Math.min(X,S)}P=X/U;if(Y){this._$outerCaption.css({width:P,maxHeight:Math.max(0,T-X)}).addClass("lb-concat")}}return{width:P,height:X}},setOverlayToDocSize:function(){this._$overlay.css({width:w(document).width(),height:w(document).height()})},resize:function(){if(w(window).width()!==this._winWidth||w(window).height()!==this._winHeight){this._winWidth=w(window).width();this._winHeight=w(window).height();this.resetTimer();var Q=this.getResponsiveSize(this._$innerBox.width(),this._$innerBox.height()),R=Q.width,P=Q.height;this._$outerBox.css({width:R,height:P});if(this._displayCPanel){P+=this._$cpanel.outerHeight()}if(this._$outerCaption.is(":visible")){this._$outerCaption.width(R);P+=this._$outerCaption.outerHeight()}this._$container.lbStop(true).css({width:R,height:P});R+=this._padding;P+=this._padding;this._$wrapper.lbStop(true).css({marginLeft:-(R+this._margin)/2,marginTop:-(P+this._margin)/2-this._offset,width:R,height:P});this.play()}},startTimer:function(){if(this._$currGroup.data("autoPlay")&&null===this._timerId){var P=Math.round(this._$timer.data("pct")*this._$currGroup.data("delay"));this._$timer.animate({width:"100%"},P,"linear");this._timerId=setTimeout(w.proxy(this.rotateNext,this),P)}},resetTimer:function(){clearTimeout(this._timerId);this._timerId=null;this._$timer.stop(true).width(0).data("pct",1)},pause:function(){clearTimeout(this._timerId);this._timerId=null;var P=1-(this._$timer.width()/(this._$timer.parent().width()+1));this._$timer.stop(true).data("pct",P)},keyControl:function(P){switch(P.keyCode){case 27:this.close(P);break;case 37:this.prev();break;case 39:this.next();break;case 80:this.togglePlay();break}},mousescroll:function(P){P.preventDefault();if(!this._$wrapper.is(":animated")){var Q=(typeof P.originalEvent.wheelDelta==="undefined")?-P.originalEvent.detail:P.originalEvent.wheelDelta;if(0<Q){this.prev()}else{this.next()}}},touchStart:function(P){this._swipeMove=0;if(1===P.originalEvent.touches.length){this._swipeStart=new Date();this._startX=P.originalEvent.touches[0].pageX;this._startY=P.originalEvent.touches[0].pageY;this._$wrapper.bind("touchmove",w.proxy(this.touchMove,this)).one("touchend",w.proxy(this.touchEnd,this))}},touchMove:function(Q){var P=this._startY-Q.originalEvent.touches[0].pageY;this._swipeMove=this._startX-Q.originalEvent.touches[0].pageX;this._touchScrolling=Math.abs(this._swipeMove)<Math.abs(P);if(!this._touchScrolling){Q.preventDefault()}},touchEnd:function(P){this._$wrapper.unbind("touchmove");if(!this._touchScrolling){if(Math.abs(this._swipeMove)>j){if(this._swipeMove>0){this.next()}else{if(this._swipeMove<0){this.prev()}}}}},preloadGroup:function(P){this._$wrapper.one(t+"."+(P.data("callId")+"_"+P.data("lightbox-group")),w.proxy(function(){this.loadNextImage(P.toArray())},this))},loadNextThumb:function(P,Q){if(P.length&&w.contains(this._$thumbList[0],P[0])){this.initThumb(w(P.splice(0,1))).always(w.proxy(function(){this.loadNextThumb(P,Q)},this))}else{if(w.isFunction(Q)){Q.call(this)}}},initThumb:function(Q){var P=w.Deferred(),S=Q.find(">img"),R=Q.data("thumbUrl");S.one("load",w.proxy(function(U){var T;if(k.backgroundSize){T=w("<div></div>").css({backgroundImage:"url("+R+")"}).attr({title:w(U.currentTarget).attr("title")});w(U.currentTarget).hide().after(T)}else{T=w(U.currentTarget);this.fillThumb(T)}T.lbAddClass("lb-opacity-transition").lbReflow().addClass("lb-loaded");P.resolve()},this)).error(function(T){w(T.currentTarget).remove();P.reject()}).attr("src",R);if(S[0].complete||"complete"===S[0].readyState){S.trigger("load")}return P.promise()},loadNextImage:function(P,Q){if(P.length){this.preloadImage(w(P.splice(0,1))).always(w.proxy(function(){this.loadNextImage(P,Q)},this))}else{if(w.isFunction(Q)){Q.call(this)}}},preloadImage:function(R){var Q=w.Deferred();if("image"===R.data("contentType")){var P=document.createElement("img"),S=w(P);S.one("load",function(){Q.resolve();P=null}).error(function(){Q.reject();P=null}).attr("src",R.attr("href"));if(S[0].complete||"complete"===S[0].readyState){S.trigger("load")}}else{Q.reject()}return Q.promise()},destroy:function(){try{this.pause();this._$overlay.remove();w(window).add(w(document)).unbind(e).unbind(e+"_extra");C.instance=null;C.instance=undefined}catch(P){}},ie6_open:w.noop,ie6_close:w.noop};function H(P){if(P.match(/[^\s]+\.(jpg|gif|png|bmp)/i)){return"image"}if(P.match(/[^\s]+\.(swf)/i)){return"flash"}if(0===P.indexOf("#")){return"inline"}return"iframe"}function F(P,Q){P=parseInt(P,10);return(isNaN(P)||0>=P)?Q:P}function o(P){return(typeof P==="undefined"||""===w.trim(P))}function A(P,Q){return((typeof P==="undefined"||isNaN(P))?Q:Math.max(parseInt(P,10),O))}function D(P,Q){return(typeof P!=="undefined")?P:Q}function p(P){var R=navigator.userAgent,Q=R.indexOf("Android");if(Q>-1){if(typeof P==="undefined"||parseFloat(R.slice(Q+8))<=P){return true}}return false}function d(P){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){if(typeof P==="undefined"){return true}var Q=parseFloat(RegExp.$1);if(Q<=P){return true}}return false}function y(P){P.preventDefault()}function B(P){P.stopPropagation()}function m(W){var U=["Webkit","Moz","O","ms"],T=document.body||document.documentElement,R=T.style,Q=false;if(typeof R[W]!=="undefined"){Q=W}else{var S=W.charAt(0).toUpperCase()+W.slice(1);for(var P=0;P<U.length;P++){var V=U[P]+S;if(typeof R[V]!=="undefined"){Q=V;break}}}k[W]=Q;return Q}function f(){var R=document.createElement("div"),Q=R.style,P;Q.cssText="background-color:rgba(0, 0, 0, 0.5)";P=(0<=(Q.backgroundColor+"").indexOf("rgba"));R=null;return P}w.fn.lbTransition=function(){var R=arguments[0],T,U,Q,P;if(typeof arguments[1]==="object"){var S=arguments[1];T=S.duration;U=S.easing;Q=S.complete;P=S.always}else{T=arguments[1];if(3===arguments.length){Q=arguments[2]}else{U=arguments[2];Q=arguments[3]}}T=D(T,400);U=D(U,"swing");return this.each(function(){w(this).queue(function(){if(w.isFunction(Q)){w(this).one(J,Q);w(this).lbForceTransitionEnd(T+50)}if(w.isFunction(P)){w(this).one(J+".always",P)}w(this).one(J,function(){w(this).css(i+"-duration","0s").dequeue()});R[i]="all "+T+"ms "+G[U];w(this).lbReflow().css(R)})})};w.fn.lbStop=function(P,Q){return this.each(function(){if(P){w(this).clearQueue()}clearTimeout(w(this).data("endId"));if(Q){w(this).trigger(J)}else{w(this).trigger(J+".always");w(this).unbind(J)}w(this).css(i,"none").css(i+"-duration","0s").dequeue()})};w.fn.lbReflow=function(){return this.each(function(){var P=this.offsetWidth})};w.fn.lbForceTransitionEnd=function(P){return this.each(function(){var Q=false;w(this).one(J,function(){Q=true});w(this).data("endId",setTimeout(w.proxy(function(){if(!Q){w(this).trigger(J)}},this),P))})};w.fn.lbAddClass=function(P){return this.each(function(R,Q){if(k.transition&&!g){w(Q).addClass(P)}})};w.fn.fotobox=function(){var R=arguments,T=R[0];if(x[T]){x[T].apply(w(this),Array.prototype.slice.call(R,1))}else{if(typeof T==="object"||!T){var U=w(this),S=w.extend(true,{},w.fn.fotobox.defaults,T),Q={},P=C.getInstance();w.each(S,function(V,W){U.data(V,W)});U.data({callId:++C.fnCalled}).each(function(ab,Z){var X=w(Z),W=X.data("lightbox-group"),aa=X.data("lightbox-type"),Y,V;if(o(W)){Y=X;V=0;X.data({autoPlay:false,playButton:false,timer:false,navButtons:false,numberInfo:false,mousewheel:false,keyboard:false,swipe:false})}else{if(typeof Q[W]==="undefined"){Y=U.filter('[data-lightbox-group="'+W+'"]');Q[W]=Y}else{Y=Q[W]}V=Y.index(X)}if(typeof X.attr("href")==="undefined"){X.attr("href","")}if(o(aa)){aa=H(X.attr("href"))}X.addClass("lb-link").data({index:V,contentType:aa,group:Y}).unbind("click"+e).bind("click"+e,w.proxy(P.open,P))});w.each(Q,function(V,X){var W=w(X);if(1>=W.length){W.data({autoPlay:false,playButton:false,timer:false,navButtons:false,numberInfo:false,mousewheel:false,keyboard:false,swipe:false})}else{if(S.preload){P.preloadGroup(W)}}})}}return this};w.fn.fotobox.defaults={responsive:true,autoPlay:false,playButton:true,delay:5000,speed:600,easing:"",navButtons:true,numberInfo:true,timer:true,caption:true,captionPosition:"outside",captionButton:false,continuous:true,mousewheel:true,keyboard:true,swipe:true,color:"#fff",backgroundColor:"#333",overlayColor:"#000",overlayOpacity:0.7,preload:true,close:"close",previous:"previous",next:"next",play:"play",pause:"pause",current:"{current} / {total}",openCaption:"open caption",closeCaption:"close caption",errorMessage:"Error Loading Content",initialWidth:L,initialHeight:L,thumbnails:{enable:true,width:50,height:50,position:"bottom",title:false}};w.fn.wtLightBox=w.fn.gsLightBox=w.fn.fotobox;w(document).ready(function(){var P=new C()})})(jQuery);